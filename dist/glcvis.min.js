!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.glc=n():t.glc=n()}(self,(function(){return(()=>{"use strict";var __webpack_modules__={951:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>numeric});var numeric="undefined"==typeof exports?function(){}:exports;void 0!==__webpack_require__.g&&(__webpack_require__.g.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(t,n){var e,r,i;for(void 0===n&&(n=15),r=.5,e=new Date;;){for(i=r*=2;i>3;i-=4)t(),t(),t(),t();for(;i>0;)t(),i--;if(new Date-e>n)break}for(i=r;i>3;i-=4)t(),t(),t(),t();for(;i>0;)t(),i--;return 1e3*(3*r-1)/(new Date-e)},numeric._myIndexOf=function(t){var n,e=this.length;for(n=0;n<e;++n)if(this[n]===t)return n;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(t){function n(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+n(-t);if(isFinite(t)){var e=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,e),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(e++,i=(r=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+e.toString()}return"Infinity"}var e=[];return function t(r){var i;if(void 0===r)return e.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof r)return e.push('"'+r+'"'),!1;if("boolean"==typeof r)return e.push(r.toString()),!1;if("number"==typeof r){var o=n(r),a=r.toPrecision(numeric.precision),s=parseFloat(r.toString()).toString(),u=[o,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(i=1;i<u.length;i++)u[i].length<o.length&&(o=u[i]);return e.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===r)return e.push("null"),!1;if("function"==typeof r){e.push(r.toString());var c=!1;for(i in r)r.hasOwnProperty(i)&&(c?e.push(",\n"):e.push("\n{"),c=!0,e.push(i),e.push(": \n"),t(r[i]));return c&&e.push("}\n"),!0}if(r instanceof Array){if(r.length>numeric.largeArray)return e.push("...Large Array..."),!0;for(c=!1,e.push("["),i=0;i<r.length;i++)i>0&&(e.push(","),c&&e.push("\n ")),c=t(r[i]);return e.push("]"),!0}for(i in e.push("{"),c=!1,r)r.hasOwnProperty(i)&&(c&&e.push(",\n"),c=!0,e.push(i),e.push(": \n"),t(r[i]));return e.push("}"),!0}(t),e.join("")},numeric.parseDate=function(t){return function t(n){if("string"==typeof n)return Date.parse(n.replace(/-/g,"/"));if(!(n instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var e,r=[];for(e=0;e<n.length;e++)r[e]=t(n[e]);return r}(t)},numeric.parseFloat=function(t){return function t(n){if("string"==typeof n)return parseFloat(n);if(!(n instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var e,r=[];for(e=0;e<n.length;e++)r[e]=t(n[e]);return r}(t)},numeric.parseCSV=function(t){var n,e,r,i=t.split("\n"),o=[],a=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(e=0;e<i.length;e++){var c,h=(i[e]+",").match(a);if(h.length>0){for(o[u]=[],n=0;n<h.length;n++)c=(r=h[n]).substr(0,r.length-1),s.test(c)?o[u][n]=parseFloat(c):o[u][n]=c;u++}}return o},numeric.toCSV=function(t){var n,e,r,i,o,a=numeric.dim(t);for(r=a[0],a[1],o=[],n=0;n<r;n++){for(i=[],e=0;e<r;e++)i[e]=t[n][e].toString();o[n]=i.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(t){var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n},numeric.imageURL=function(t){function n(t,n,e){void 0===n&&(n=0),void 0===e&&(e=t.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(t.length,r=n;r<e;r++)o=o>>>8^i[255&(o^t[r])];return-1^o}var e,r,i,o,a,s,u,c,h,l,f=t[0].length,m=t[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(l=n(p,12,29),p[29]=l>>24&255,p[30]=l>>16&255,p[31]=l>>8&255,p[32]=255&l,e=1,r=0,u=0;u<f;u++){for(u<f-1?p.push(0):p.push(1),a=3*m+1+(0===u)&255,s=3*m+1+(0===u)>>8&255,p.push(a),p.push(s),p.push(255&~a),p.push(255&~s),0===u&&p.push(0),c=0;c<m;c++)for(i=0;i<3;i++)r=(r+(e=(e+(a=(a=t[i][u][c])>255?255:a<0?0:Math.round(a)))%65521))%65521,p.push(a);p.push(0)}return h=(r<<16)+e,p.push(h>>24&255),p.push(h>>16&255),p.push(h>>8&255),p.push(255&h),o=p.length-41,p[33]=o>>24&255,p[34]=o>>16&255,p[35]=o>>8&255,p[36]=255&o,l=n(p,37),p.push(l>>24&255),p.push(l>>16&255),p.push(l>>8&255),p.push(255&l),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(t){var n,e,r,i,o,a,s,u=t.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(n=0;n<u;n+=3)o=((3&(e=t[n]))<<4)+((r=t[n+1])>>4),a=((15&r)<<2)+((i=t[n+2])>>6),s=63&i,n+1>=u?a=s=64:n+2>=u&&(s=64),h+=c.charAt(e>>2)+c.charAt(o)+c.charAt(a)+c.charAt(s);return h}(p)},numeric._dim=function(t){for(var n=[];"object"==typeof t;)n.push(t.length),t=t[0];return n},numeric.dim=function(t){var n;return"object"==typeof t?"object"==typeof(n=t[0])?"object"==typeof n[0]?numeric._dim(t):[t.length,n.length]:[t.length]:[]},numeric.mapreduce=function(t,n){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+t+";\n    xi = x[i-1];\n    "+t+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},numeric.mapreduce2=function(t,n){return Function("x","var n = x.length;\nvar i,xi;\n"+n+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+t+";\n}\nreturn accum;")},numeric.same=function t(n,e){var r,i;if(!(n instanceof Array&&e instanceof Array))return!1;if((i=n.length)!==e.length)return!1;for(r=0;r<i;r++)if(n[r]!==e[r]){if("object"!=typeof n[r])return!1;if(!t(n[r],e[r]))return!1}return!0},numeric.rep=function(t,n,e){void 0===e&&(e=0);var r,i=t[e],o=Array(i);if(e===t.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=n,o[r]=n;return-1===r&&(o[0]=n),o}for(r=i-1;r>=0;r--)o[r]=numeric.rep(t,n,e+1);return o},numeric.dotMMsmall=function(t,n){var e,r,i,o,a,s,u,c,h,l,f;for(o=t.length,a=n.length,s=n[0].length,u=Array(o),e=o-1;e>=0;e--){for(c=Array(s),h=t[e],i=s-1;i>=0;i--){for(l=h[a-1]*n[a-1][i],r=a-2;r>=1;r-=2)f=r-1,l+=h[r]*n[r][i]+h[f]*n[f][i];0===r&&(l+=h[0]*n[0][i]),c[i]=l}u[e]=c}return u},numeric._getCol=function(t,n,e){var r;for(r=t.length-1;r>0;--r)e[r]=t[r][n],e[--r]=t[r][n];0===r&&(e[0]=t[0][n])},numeric.dotMMbig=function(t,n){var e,r,i,o=numeric._getCol,a=n.length,s=Array(a),u=t.length,c=n[0].length,h=new Array(u),l=numeric.dotVV;for(--a,r=--u;-1!==r;--r)h[r]=Array(c);for(r=--c;-1!==r;--r)for(o(n,r,s),i=u;-1!==i;--i)e=t[i],h[i][r]=l(e,s);return h},numeric.dotMV=function(t,n){var e,r=t.length,i=(n.length,Array(r)),o=numeric.dotVV;for(e=r-1;e>=0;e--)i[e]=o(t[e],n);return i},numeric.dotVM=function(t,n){var e,r,i,o,a,s,u;for(i=t.length,o=n[0].length,a=Array(o),r=o-1;r>=0;r--){for(s=t[i-1]*n[i-1][r],e=i-2;e>=1;e-=2)u=e-1,s+=t[e]*n[e][r]+t[u]*n[u][r];0===e&&(s+=t[0]*n[0][r]),a[r]=s}return a},numeric.dotVV=function(t,n){var e,r,i=t.length,o=t[i-1]*n[i-1];for(e=i-2;e>=1;e-=2)r=e-1,o+=t[e]*n[e]+t[r]*n[r];return 0===e&&(o+=t[0]*n[0]),o},numeric.dot=function(t,n){var e=numeric.dim;switch(1e3*e(t).length+e(n).length){case 2002:return n.length<10?numeric.dotMMsmall(t,n):numeric.dotMMbig(t,n);case 2001:return numeric.dotMV(t,n);case 1002:return numeric.dotVM(t,n);case 1001:return numeric.dotVV(t,n);case 1e3:return numeric.mulVS(t,n);case 1:return numeric.mulSV(t,n);case 0:return t*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(t){var n,e,r,i,o=t.length,a=Array(o);for(n=o-1;n>=0;n--){for(i=Array(o),e=n+2,r=o-1;r>=e;r-=2)i[r]=0,i[r-1]=0;for(r>n&&(i[r]=0),i[n]=t[n],r=n-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),a[n]=i}return a},numeric.getDiag=function(t){var n,e=Math.min(t.length,t[0].length),r=Array(e);for(n=e-1;n>=1;--n)r[n]=t[n][n],r[--n]=t[n][n];return 0===n&&(r[0]=t[0][0]),r},numeric.identity=function(t){return numeric.diag(numeric.rep([t],1))},numeric.pointwise=function(t,n,e){void 0===e&&(e="");var r,i,o=[],a=/\[i\]$/,s="",u=!1;for(r=0;r<t.length;r++)a.test(t[r])?s=i=t[r].substring(0,t[r].length-3):i=t[r],"ret"===i&&(u=!0),o.push(i);return o[t.length]="_s",o[t.length+1]="_k",o[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\n    return ret;\n}\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(t,n,e){void 0===e&&(e="");var r,i,o=[],a=/\[i\]$/,s="",u=!1;for(r=0;r<t.length;r++)a.test(t[r])?s=i=t[r].substring(0,t[r].length-3):i=t[r],"ret"===i&&(u=!0),o.push(i);return o[t.length]="var _n = "+s+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function t(n,e,r,i,o){var a;if(i!==r.length-1)for(a=r[i]-1;a>=0;a--)t("object"==typeof n?n[a]:n,"object"==typeof e?e[a]:e,r,i+1,o);else o(n,e)},numeric._biforeach2=function t(n,e,r,i,o){if(i===r.length-1)return o(n,e);var a,s=r[i],u=Array(s);for(a=s-1;a>=0;--a)u[a]=t("object"==typeof n?n[a]:n,"object"==typeof e?e[a]:e,r,i+1,o);return u},numeric._foreach=function t(n,e,r,i){var o;if(r!==e.length-1)for(o=e[r]-1;o>=0;o--)t(n[o],e,r+1,i);else i(n)},numeric._foreach2=function t(n,e,r,i){if(r===e.length-1)return i(n);var o,a=e[r],s=Array(a);for(o=a-1;o>=0;o--)s[o]=t(n[o],e,r+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,n;for(t=0;t<numeric.mathfuns2.length;++t)n=numeric.mathfuns2[t],numeric.ops2[n]=n;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){n=numeric.ops2[t];var e,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,t)?(i="var "+n+" = Math."+n+";\n",e=function(t,e,r){return t+" = "+n+"("+e+","+r+")"},r=function(t,e){return t+" = "+n+"("+t+","+e+")"}):(e=function(t,e,r){return t+" = "+e+" "+n+" "+r},r=numeric.opseq.hasOwnProperty(t+"eq")?function(t,e){return t+" "+n+"= "+e}:function(t,e){return t+" = "+t+" "+n+" "+e}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],e("ret[i]","x[i]","y[i]"),i),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],e("ret[i]","x","y[i]"),i),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],e("ret[i]","x[i]","y"),i),numeric[t]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[n]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[t+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(t=0;t<numeric.mathfuns2.length;++t)n=numeric.mathfuns2[t],delete numeric.ops2[n];for(t=0;t<numeric.mathfuns.length;++t)n=numeric.mathfuns[t],numeric.ops1[n]=n;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(i="",n=numeric.ops1[t],-1!==numeric.myIndexOf.call(numeric.mathfuns,t)&&Math.hasOwnProperty(n)&&(i="var "+n+" = Math."+n+";\n"),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",i),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+t+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",i),numeric[t]=Function("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+t+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(t=0;t<numeric.mathfuns.length;++t)n=numeric.mathfuns[t],delete numeric.ops1[n];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(n=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(n[0],n[1]),numeric[t]=Function("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+t+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(t,n){return"object"==typeof t?"object"==typeof n?numeric.truncVV(t,n):numeric.truncVS(t,n):"object"==typeof n?numeric.truncSV(t,n):Math.round(t/n)*n},numeric.inv=function(t){var n,e,r,i,o,a,s,u=numeric.dim(t),c=Math.abs,h=u[0],l=u[1],f=numeric.clone(t),m=numeric.identity(h);for(a=0;a<l;++a){var p=-1,d=-1;for(o=a;o!==h;++o)(s=c(f[o][a]))>d&&(p=o,d=s);for(e=f[p],f[p]=f[a],f[a]=e,i=m[p],m[p]=m[a],m[a]=i,t=e[a],s=a;s!==l;++s)e[s]/=t;for(s=l-1;-1!==s;--s)i[s]/=t;for(o=h-1;-1!==o;--o)if(o!==a){for(n=f[o],r=m[o],t=n[a],s=a+1;s!==l;++s)n[s]-=e[s]*t;for(s=l-1;s>0;--s)r[s]-=i[s]*t,r[--s]-=i[s]*t;0===s&&(r[0]-=i[0]*t)}}return m},numeric.det=function(t){var n=numeric.dim(t);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var e,r,i,o,a,s,u,c,h=n[0],l=1,f=numeric.clone(t);for(r=0;r<h-1;r++){for(i=r,e=r+1;e<h;e++)Math.abs(f[e][r])>Math.abs(f[i][r])&&(i=e);for(i!==r&&(u=f[i],f[i]=f[r],f[r]=u,l*=-1),o=f[r],e=r+1;e<h;e++){for(s=(a=f[e])[r]/o[r],i=r+1;i<h-1;i+=2)c=i+1,a[i]-=o[i]*s,a[c]-=o[c]*s;i!==h&&(a[i]-=o[i]*s)}if(0===o[r])return 0;l*=o[r]}return l*f[r][r]},numeric.transpose=function(t){var n,e,r,i,o,a=t.length,s=t[0].length,u=Array(s);for(e=0;e<s;e++)u[e]=Array(a);for(n=a-1;n>=1;n-=2){for(i=t[n],r=t[n-1],e=s-1;e>=1;--e)(o=u[e])[n]=i[e],o[n-1]=r[e],(o=u[--e])[n]=i[e],o[n-1]=r[e];0===e&&((o=u[0])[n]=i[0],o[n-1]=r[0])}if(0===n){for(r=t[0],e=s-1;e>=1;--e)u[e][0]=r[e],u[--e][0]=r[e];0===e&&(u[0][0]=r[0])}return u},numeric.negtranspose=function(t){var n,e,r,i,o,a=t.length,s=t[0].length,u=Array(s);for(e=0;e<s;e++)u[e]=Array(a);for(n=a-1;n>=1;n-=2){for(i=t[n],r=t[n-1],e=s-1;e>=1;--e)(o=u[e])[n]=-i[e],o[n-1]=-r[e],(o=u[--e])[n]=-i[e],o[n-1]=-r[e];0===e&&((o=u[0])[n]=-i[0],o[n-1]=-r[0])}if(0===n){for(r=t[0],e=s-1;e>=1;--e)u[e][0]=-r[e],u[--e][0]=-r[e];0===e&&(u[0][0]=-r[0])}return u},numeric._random=function t(n,e){var r,i,o=n[e],a=Array(o);if(e===n.length-1){for(i=Math.random,r=o-1;r>=1;r-=2)a[r]=i(),a[r-1]=i();return 0===r&&(a[0]=i()),a}for(r=o-1;r>=0;r--)a[r]=t(n,e+1);return a},numeric.random=function(t){return numeric._random(t,0)},numeric.norm2=function(t){return Math.sqrt(numeric.norm2Squared(t))},numeric.linspace=function(t,n,e){if(void 0===e&&(e=Math.max(Math.round(n-t)+1,1)),e<2)return 1===e?[t]:[];var r,i=Array(e);for(r=--e;r>=0;r--)i[r]=(r*n+(e-r)*t)/e;return i},numeric.getBlock=function(t,n,e){var r=numeric.dim(t);return function t(i,o){var a,s=n[o],u=e[o]-s,c=Array(u);if(o===r.length-1){for(a=u;a>=0;a--)c[a]=i[a+s];return c}for(a=u;a>=0;a--)c[a]=t(i[a+s],o+1);return c}(t,0)},numeric.setBlock=function(t,n,e,r){var i=numeric.dim(t);return function t(r,o,a){var s,u=n[a],c=e[a]-u;if(a===i.length-1)for(s=c;s>=0;s--)r[s+u]=o[s];for(s=c;s>=0;s--)t(r[s+u],o[s],a+1)}(t,r,0),t},numeric.getRange=function(t,n,e){var r,i,o,a,s=n.length,u=e.length,c=Array(s);for(r=s-1;-1!==r;--r)for(c[r]=Array(u),o=c[r],a=t[n[r]],i=u-1;-1!==i;--i)o[i]=a[e[i]];return c},numeric.blockMatrix=function(t){var n=numeric.dim(t);if(n.length<4)return numeric.blockMatrix([t]);var e,r,i,o,a,s=n[0],u=n[1];for(e=0,r=0,i=0;i<s;++i)e+=t[i][0].length;for(o=0;o<u;++o)r+=t[0][o][0].length;var c=Array(e);for(i=0;i<e;++i)c[i]=Array(r);var h,l,f,m,p,d=0;for(i=0;i<s;++i){for(h=r,o=u-1;-1!==o;--o)for(h-=(a=t[i][o])[0].length,f=a.length-1;-1!==f;--f)for(p=a[f],l=c[d+f],m=p.length-1;-1!==m;--m)l[h+m]=p[m];d+=t[i][0].length}return c},numeric.tensor=function(t,n){if("number"==typeof t||"number"==typeof n)return numeric.mul(t,n);var e=numeric.dim(t),r=numeric.dim(n);if(1!==e.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,s,u=e[0],c=r[0],h=Array(u);for(o=u-1;o>=0;o--){for(i=Array(c),s=t[o],a=c-1;a>=3;--a)i[a]=s*n[a],i[--a]=s*n[a],i[--a]=s*n[a],i[--a]=s*n[a];for(;a>=0;)i[a]=s*n[a],--a;h[o]=i}return h},numeric.T=function(t,n){this.x=t,this.y=n},numeric.t=function(t,n){return new numeric.T(t,n)},numeric.Tbinop=function(t,n,e,r,i){var o;if(numeric.indexOf,"string"!=typeof i)for(o in i="",numeric)numeric.hasOwnProperty(o)&&(t.indexOf(o)>=0||n.indexOf(o)>=0||e.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+e+");\n}\nif(y.y) {\n  return new numeric.T("+n+");\n}\nreturn new numeric.T("+t+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var t=numeric.mul,n=numeric.div;if(this.y){var e=numeric.add(t(this.x,this.x),t(this.y,this.y));return new numeric.T(n(this.x,e),n(numeric.neg(this.y),e))}return new T(n(1,this.x))},numeric.T.prototype.div=function(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var n=numeric.div;return this.y?new numeric.T(n(this.x,t.x),n(this.y,t.x)):new numeric.T(n(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var t=numeric.transpose,n=this.x,e=this.y;return e?new numeric.T(t(n),t(e)):new numeric.T(t(n))},numeric.T.prototype.transjugate=function(){var t=numeric.transpose,n=this.x,e=this.y;return e?new numeric.T(t(n),numeric.negtranspose(e)):new numeric.T(t(n))},numeric.Tunop=function(t,n,e){return"string"!=typeof e&&(e=""),Function("var x = this;\n"+e+"\nif(x.y) {  "+n+";\n}\n"+t+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var t=this;if(void 0===t.y)return new numeric.T(numeric.inv(t.x));var n,e,r,i,o,a,s,u,c,h,l,f,m,p,d,g,v,y,_=t.x.length,x=numeric.identity(_),w=numeric.rep([_,_],0),b=numeric.clone(t.x),M=numeric.clone(t.y);for(c=0;c<_;c++){for(f=(p=b[c][c])*p+(d=M[c][c])*d,l=c,h=c+1;h<_;h++)(m=(p=b[h][c])*p+(d=M[h][c])*d)>f&&(l=h,f=m);for(l!==c&&(y=b[c],b[c]=b[l],b[l]=y,y=M[c],M[c]=M[l],M[l]=y,y=x[c],x[c]=x[l],x[l]=y,y=w[c],w[c]=w[l],w[l]=y),n=b[c],e=M[c],o=x[c],a=w[c],p=n[c],d=e[c],h=c+1;h<_;h++)g=n[h],v=e[h],n[h]=(g*p+v*d)/f,e[h]=(v*p-g*d)/f;for(h=0;h<_;h++)g=o[h],v=a[h],o[h]=(g*p+v*d)/f,a[h]=(v*p-g*d)/f;for(h=c+1;h<_;h++){for(r=b[h],i=M[h],s=x[h],u=w[h],p=r[c],d=i[c],l=c+1;l<_;l++)g=n[l],v=e[l],r[l]-=g*p-v*d,i[l]-=v*p+g*d;for(l=0;l<_;l++)g=o[l],v=a[l],s[l]-=g*p-v*d,u[l]-=v*p+g*d}}for(c=_-1;c>0;c--)for(o=x[c],a=w[c],h=c-1;h>=0;h--)for(s=x[h],u=w[h],p=b[h][c],d=M[h][c],l=_-1;l>=0;l--)g=o[l],v=a[l],s[l]-=p*g-d*v,u[l]-=p*v+d*g;return new numeric.T(x,w)},numeric.T.prototype.get=function(t){var n,e=this.x,r=this.y,i=0,o=t.length;if(r){for(;i<o;)e=e[n=t[i]],r=r[n],i++;return new numeric.T(e,r)}for(;i<o;)e=e[n=t[i]],i++;return new numeric.T(e)},numeric.T.prototype.set=function(t,n){var e,r=this.x,i=this.y,o=0,a=t.length,s=n.x,u=n.y;if(0===a)return u?this.y=u:i&&(this.y=void 0),this.x=r,this;if(u){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);o<a-1;)r=r[e=t[o]],i=i[e],o++;return r[e=t[o]]=s,i[e]=u,this}if(i){for(;o<a-1;)r=r[e=t[o]],i=i[e],o++;return r[e=t[o]]=s,i[e]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<a-1;)r=r[e=t[o]],o++;return r[e=t[o]]=s,this},numeric.T.prototype.getRows=function(t,n){var e,r,i=n-t+1,o=Array(i),a=this.x,s=this.y;for(e=t;e<=n;e++)o[e-t]=a[e];if(s){for(r=Array(i),e=t;e<=n;e++)r[e-t]=s[e];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(t,n,e){var r,i=this.x,o=this.y,a=e.x,s=e.y;for(r=t;r<=n;r++)i[r]=a[r-t];if(s)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),r=t;r<=n;r++)o[r]=s[r-t];else if(o)for(r=t;r<=n;r++)o[r]=numeric.rep([a[r-t].length],0);return this},numeric.T.prototype.getRow=function(t){var n=this.x,e=this.y;return e?new numeric.T(n[t],e[t]):new numeric.T(n[t])},numeric.T.prototype.setRow=function(t,n){var e=this.x,r=this.y,i=n.x,o=n.y;return e[t]=i,o?(r||(r=numeric.rep(numeric.dim(e),0),this.y=r),r[t]=o):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(t,n){var e=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(e,t,n),i(r,t,n)):new numeric.T(i(e,t,n))},numeric.T.prototype.setBlock=function(t,n,e){e instanceof numeric.T||(e=new numeric.T(e));var r=this.x,i=this.y,o=numeric.setBlock,a=e.x,s=e.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(r,t,n,a),o(i,t,n,s),this;o(r,t,n,a),i&&o(i,t,n,numeric.rep(numeric.dim(a),0))},numeric.T.rep=function(t,n){var e=numeric.T;n instanceof e||(n=new e(n));var r=n.x,i=n.y,o=numeric.rep;return i?new e(o(t,r),o(t,i)):new e(o(t,r))},numeric.T.diag=function(t){t instanceof numeric.T||(t=new numeric.T(t));var n=t.x,e=t.y,r=numeric.diag;return e?new numeric.T(r(n),r(e)):new numeric.T(r(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(t){return new numeric.T(numeric.identity(t))},numeric.T.prototype.getDiag=function(){var t=numeric,n=this.x,e=this.y;return e?new t.T(t.getDiag(n),t.getDiag(e)):new t.T(t.getDiag(n))},numeric.house=function(t){var n=numeric.clone(t),e=(t[0]>=0?1:-1)*numeric.norm2(t);n[0]+=e;var r=numeric.norm2(n);if(0===r)throw new Error("eig: internal error");return numeric.div(n,r)},numeric.toUpperHessenberg=function(t){var n=numeric.dim(t);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var e,r,i,o,a,s,u,c,h,l,f=n[0],m=numeric.clone(t),p=numeric.identity(f);for(r=0;r<f-2;r++){for(o=Array(f-r-1),e=r+1;e<f;e++)o[e-r-1]=m[e][r];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(m,[r+1,r],[f-1,f-1]),u=numeric.tensor(a,numeric.dot(a,s)),e=r+1;e<f;e++)for(c=m[e],h=u[e-r-1],i=r;i<f;i++)c[i]-=2*h[i-r];for(s=numeric.getBlock(m,[0,r+1],[f-1,f-1]),u=numeric.tensor(numeric.dot(s,a),a),e=0;e<f;e++)for(c=m[e],h=u[e],i=r+1;i<f;i++)c[i]-=2*h[i-r-1];for(s=Array(f-r-1),e=r+1;e<f;e++)s[e-r-1]=p[e];for(u=numeric.tensor(a,numeric.dot(a,s)),e=r+1;e<f;e++)for(l=p[e],h=u[e-r-1],i=0;i<f;i++)l[i]-=2*h[i]}}return{H:m,Q:p}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(t,n){void 0===n&&(n=1e4),t=numeric.clone(t),numeric.clone(t);var e,r,i,o,a,s,u,c,h,l,f,m,p,d,g,v,y,_,x=numeric.dim(t)[0],w=numeric.identity(x);if(x<3)return{Q:w,B:[[0,x-1]]};var b=numeric.epsilon;for(_=0;_<n;_++){for(v=0;v<x-1;v++)if(Math.abs(t[v+1][v])<b*(Math.abs(t[v][v])+Math.abs(t[v+1][v+1]))){var M=numeric.QRFrancis(numeric.getBlock(t,[0,0],[v,v]),n),k=numeric.QRFrancis(numeric.getBlock(t,[v+1,v+1],[x-1,x-1]),n);for(m=Array(v+1),g=0;g<=v;g++)m[g]=w[g];for(p=numeric.dot(M.Q,m),g=0;g<=v;g++)w[g]=p[g];for(m=Array(x-v-1),g=v+1;g<x;g++)m[g-v-1]=w[g];for(p=numeric.dot(k.Q,m),g=v+1;g<x;g++)w[g]=p[g-v-1];return{Q:w,B:M.B.concat(numeric.add(k.B,v+1))}}var A,T,S;for(i=t[x-2][x-2],o=t[x-2][x-1],a=t[x-1][x-2],c=i+(s=t[x-1][x-1]),u=i*s-o*a,h=numeric.getBlock(t,[0,0],[2,2]),c*c>=4*u?(A=.5*(c+Math.sqrt(c*c-4*u)),T=.5*(c-Math.sqrt(c*c-4*u)),h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,A+T)),numeric.diag(numeric.rep([3],A*T)))):h=numeric.add(numeric.sub(numeric.dot(h,h),numeric.mul(h,c)),numeric.diag(numeric.rep([3],u))),e=[h[0][0],h[1][0],h[2][0]],r=numeric.house(e),m=[t[0],t[1],t[2]],p=numeric.tensor(r,numeric.dot(r,m)),g=0;g<3;g++)for(f=t[g],d=p[g],y=0;y<x;y++)f[y]-=2*d[y];for(m=numeric.getBlock(t,[0,0],[x-1,2]),p=numeric.tensor(numeric.dot(m,r),r),g=0;g<x;g++)for(f=t[g],d=p[g],y=0;y<3;y++)f[y]-=2*d[y];for(m=[w[0],w[1],w[2]],p=numeric.tensor(r,numeric.dot(r,m)),g=0;g<3;g++)for(l=w[g],d=p[g],y=0;y<x;y++)l[y]-=2*d[y];for(v=0;v<x-2;v++){for(y=v;y<=v+1;y++)if(Math.abs(t[y+1][y])<b*(Math.abs(t[y][y])+Math.abs(t[y+1][y+1]))){for(M=numeric.QRFrancis(numeric.getBlock(t,[0,0],[y,y]),n),k=numeric.QRFrancis(numeric.getBlock(t,[y+1,y+1],[x-1,x-1]),n),m=Array(y+1),g=0;g<=y;g++)m[g]=w[g];for(p=numeric.dot(M.Q,m),g=0;g<=y;g++)w[g]=p[g];for(m=Array(x-y-1),g=y+1;g<x;g++)m[g-y-1]=w[g];for(p=numeric.dot(k.Q,m),g=y+1;g<x;g++)w[g]=p[g-y-1];return{Q:w,B:M.B.concat(numeric.add(k.B,y+1))}}for(S=Math.min(x-1,v+3),e=Array(S-v),g=v+1;g<=S;g++)e[g-v-1]=t[g][v];for(r=numeric.house(e),m=numeric.getBlock(t,[v+1,v],[S,x-1]),p=numeric.tensor(r,numeric.dot(r,m)),g=v+1;g<=S;g++)for(f=t[g],d=p[g-v-1],y=v;y<x;y++)f[y]-=2*d[y-v];for(m=numeric.getBlock(t,[0,v+1],[x-1,S]),p=numeric.tensor(numeric.dot(m,r),r),g=0;g<x;g++)for(f=t[g],d=p[g],y=v+1;y<=S;y++)f[y]-=2*d[y-v-1];for(m=Array(S-v),g=v+1;g<=S;g++)m[g-v-1]=w[g];for(p=numeric.tensor(r,numeric.dot(r,m)),g=v+1;g<=S;g++)for(l=w[g],d=p[g-v-1],y=0;y<x;y++)l[y]-=2*d[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(t,n){var e,r,i,o,a,s,u,c,h,l,f,m,p,d,g,v,y=numeric.toUpperHessenberg(t),_=numeric.QRFrancis(y.H,n),x=numeric.T,w=t.length,b=_.B,M=numeric.dot(_.Q,numeric.dot(y.H,numeric.transpose(_.Q))),k=new x(numeric.dot(_.Q,y.Q)),A=b.length,T=Math.sqrt;for(r=0;r<A;r++)if((e=b[r][0])===b[r][1]);else{if(o=e+1,a=M[e][e],s=M[e][o],u=M[o][e],c=M[o][o],0===s&&0===u)continue;(l=(h=-a-c)*h-4*(a*c-s*u))>=0?((g=(a-(f=h<0?-.5*(h-T(l)):-.5*(h+T(l))))*(a-f)+s*s)>(v=u*u+(c-f)*(c-f))?(p=(a-f)/(g=T(g)),d=s/g):(p=u/(v=T(v)),d=(c-f)/v),i=new x([[d,-p],[p,d]]),k.setRows(e,o,i.dot(k.getRows(e,o)))):(f=-.5*h,m=.5*T(-l),(g=(a-f)*(a-f)+s*s)>(v=u*u+(c-f)*(c-f))?(p=(a-f)/(g=T(g+m*m)),d=s/g,f=0,m/=g):(p=u/(v=T(v+m*m)),d=(c-f)/v,f=m/v,m=0),i=new x([[d,-p],[p,d]],[[f,m],[m,-f]]),k.setRows(e,o,i.dot(k.getRows(e,o))))}var S=k.dot(t).dot(k.transjugate()),j=(w=t.length,numeric.T.identity(w));for(o=0;o<w;o++)if(o>0)for(r=o-1;r>=0;r--){var N=S.get([r,r]),E=S.get([o,o]);numeric.neq(N.x,E.x)||numeric.neq(N.y,E.y)?(f=S.getRow(r).getBlock([r],[o-1]),m=j.getRow(o).getBlock([r],[o-1]),j.set([o,r],S.get([r,o]).neg().sub(f.dot(m)).div(N.sub(E)))):j.setRow(o,j.getRow(r))}for(o=0;o<w;o++)f=j.getRow(o),j.setRow(o,f.div(f.norm2()));return j=j.transpose(),j=k.transjugate().dot(j),{lambda:S.getDiag(),E:j}},numeric.ccsSparse=function(t){var n,e,r,i=t.length,o=[];for(e=i-1;-1!==e;--e)for(r in n=t[e]){for(r=parseInt(r);r>=o.length;)o[o.length]=0;0!==n[r]&&o[r]++}var a=o.length,s=Array(a+1);for(s[0]=0,e=0;e<a;++e)s[e+1]=s[e]+o[e];var u=Array(s[a]),c=Array(s[a]);for(e=i-1;-1!==e;--e)for(r in n=t[e])0!==n[r]&&(o[r]--,u[s[r]+o[r]]=e,c[s[r]+o[r]]=n[r]);return[s,u,c]},numeric.ccsFull=function(t){var n,e,r,i,o=t[0],a=t[1],s=t[2],u=numeric.ccsDim(t),c=u[0],h=u[1],l=numeric.rep([c,h],0);for(n=0;n<h;n++)for(r=o[n],i=o[n+1],e=r;e<i;++e)l[a[e]][n]=s[e];return l},numeric.ccsTSolve=function(t,n,e,r,i){var o,a,s,u,c,h,l,f=t[0],m=t[1],p=t[2],d=f.length-1,g=Math.max,v=0;function y(t){var n;if(0===e[t]){for(e[t]=1,n=f[t];n<f[t+1];++n)y(m[n]);i[v]=t,++v}}for(void 0===r&&(e=numeric.rep([d],0)),void 0===r&&(r=numeric.linspace(0,e.length-1)),void 0===i&&(i=[]),o=r.length-1;-1!==o;--o)y(r[o]);for(i.length=v,o=i.length-1;-1!==o;--o)e[i[o]]=0;for(o=r.length-1;-1!==o;--o)a=r[o],e[a]=n[a];for(o=i.length-1;-1!==o;--o){for(a=i[o],s=f[a],u=g(f[a+1],s),c=s;c!==u;++c)if(m[c]===a){e[a]/=p[c];break}for(l=e[a],c=s;c!==u;++c)(h=m[c])!==a&&(e[h]-=l*p[c])}return e},numeric.ccsDFS=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS.prototype.dfs=function(t,n,e,r,i,o){var a,s,u,c=0,h=i.length,l=this.k,f=this.k1,m=this.j;if(0===r[t])for(r[t]=1,m[0]=t,l[0]=s=n[t],f[0]=u=n[t+1];;)if(s>=u){if(i[h]=m[c],0===c)return;++h,s=l[--c],u=f[c]}else 0===r[a=o[e[s]]]?(r[a]=1,l[c]=s,m[++c]=a,s=n[a],f[c]=u=n[a+1]):++s},numeric.ccsLPSolve=function(t,n,e,r,i,o,a){var s,u,c,h,l,f,m,p,d,g=t[0],v=t[1],y=t[2],_=(g.length,n[0]),x=n[1],w=n[2];for(u=_[i],c=_[i+1],r.length=0,s=u;s<c;++s)a.dfs(o[x[s]],g,v,e,r,o);for(s=r.length-1;-1!==s;--s)e[r[s]]=0;for(s=u;s!==c;++s)e[h=o[x[s]]]=w[s];for(s=r.length-1;-1!==s;--s){for(l=g[h=r[s]],f=g[h+1],m=l;m<f;++m)if(o[v[m]]===h){e[h]/=y[m];break}for(d=e[h],m=l;m<f;++m)(p=o[v[m]])!==h&&(e[p]-=d*y[m])}return e},numeric.ccsLUP1=function(t,n){var e,r,i,o,a,s,u,c=t[0].length-1,h=[numeric.rep([c+1],0),[],[]],l=[numeric.rep([c+1],0),[],[]],f=h[0],m=h[1],p=h[2],d=l[0],g=l[1],v=l[2],y=numeric.rep([c],0),_=numeric.rep([c],0),x=numeric.ccsLPSolve,w=(Math.max,Math.abs),b=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),k=new numeric.ccsDFS(c);for(void 0===n&&(n=1),e=0;e<c;++e){for(x(h,t,y,_,e,M,k),o=-1,a=-1,r=_.length-1;-1!==r;--r)(i=_[r])<=e||(s=w(y[i]))>o&&(a=i,o=s);for(w(y[e])<n*o&&(r=b[e],o=b[a],b[e]=o,M[o]=e,b[a]=r,M[r]=a,o=y[e],y[e]=y[a],y[a]=o),o=f[e],a=d[e],u=y[e],m[o]=b[e],p[o]=1,++o,r=_.length-1;-1!==r;--r)s=y[i=_[r]],_[r]=0,y[i]=0,i<=e?(g[a]=i,v[a]=s,++a):(m[o]=b[i],p[o]=s/u,++o);f[e+1]=o,d[e+1]=a}for(r=m.length-1;-1!==r;--r)m[r]=M[m[r]];return{L:h,U:l,P:b,Pinv:M}},numeric.ccsDFS0=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS0.prototype.dfs=function(t,n,e,r,i,o,a){var s,u,c,h=0,l=i.length,f=this.k,m=this.k1,p=this.j;if(0===r[t])for(r[t]=1,p[0]=t,f[0]=u=n[o[t]],m[0]=c=n[o[t]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(i[l]=o[p[h]],0===h)return;++l,u=f[--h],c=m[h]}else 0===r[s=e[u]]?(r[s]=1,f[h]=u,p[++h]=s,u=n[s=o[s]],m[h]=c=n[s+1]):++u}},numeric.ccsLPSolve0=function(t,n,e,r,i,o,a,s){var u,c,h,l,f,m,p,d,g,v=t[0],y=t[1],_=t[2],x=(v.length,n[0]),w=n[1],b=n[2];for(c=x[i],h=x[i+1],r.length=0,u=c;u<h;++u)s.dfs(w[u],v,y,e,r,o,a);for(u=r.length-1;-1!==u;--u)e[a[l=r[u]]]=0;for(u=c;u!==h;++u)e[l=w[u]]=b[u];for(u=r.length-1;-1!==u;--u){for(d=a[l=r[u]],f=v[l],m=v[l+1],p=f;p<m;++p)if(y[p]===d){e[d]/=_[p];break}for(g=e[d],p=f;p<m;++p)e[y[p]]-=g*_[p];e[d]=g}},numeric.ccsLUP0=function(t,n){var e,r,i,o,a,s,u,c=t[0].length-1,h=[numeric.rep([c+1],0),[],[]],l=[numeric.rep([c+1],0),[],[]],f=h[0],m=h[1],p=h[2],d=l[0],g=l[1],v=l[2],y=numeric.rep([c],0),_=numeric.rep([c],0),x=numeric.ccsLPSolve0,w=(Math.max,Math.abs),b=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),k=new numeric.ccsDFS0(c);for(void 0===n&&(n=1),e=0;e<c;++e){for(x(h,t,y,_,e,M,b,k),o=-1,a=-1,r=_.length-1;-1!==r;--r)(i=_[r])<=e||(s=w(y[b[i]]))>o&&(a=i,o=s);for(w(y[b[e]])<n*o&&(r=b[e],o=b[a],b[e]=o,M[o]=e,b[a]=r,M[r]=a),o=f[e],a=d[e],u=y[b[e]],m[o]=b[e],p[o]=1,++o,r=_.length-1;-1!==r;--r)s=y[b[i=_[r]]],_[r]=0,y[b[i]]=0,i<=e?(g[a]=i,v[a]=s,++a):(m[o]=b[i],p[o]=s/u,++o);f[e+1]=o,d[e+1]=a}for(r=m.length-1;-1!==r;--r)m[r]=M[m[r]];return{L:h,U:l,P:b,Pinv:M}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(t){return[numeric.sup(t[1])+1,t[0].length-1]},numeric.ccsGetBlock=function(t,n,e){var r=numeric.ccsDim(t),i=r[0],o=r[1];void 0===n?n=numeric.linspace(0,i-1):"number"==typeof n&&(n=[n]),void 0===e?e=numeric.linspace(0,o-1):"number"==typeof e&&(e=[e]);var a,s,u,c,h=n.length,l=e.length,f=numeric.rep([o],0),m=[],p=[],d=[f,m,p],g=t[0],v=t[1],y=t[2],_=numeric.rep([i],0),x=0,w=numeric.rep([i],0);for(s=0;s<l;++s){var b=g[c=e[s]],M=g[c+1];for(a=b;a<M;++a)w[u=v[a]]=1,_[u]=y[a];for(a=0;a<h;++a)w[n[a]]&&(m[x]=a,p[x]=_[n[a]],++x);for(a=b;a<M;++a)w[u=v[a]]=0;f[s+1]=x}return d},numeric.ccsDot=function(t,n){var e,r,i,o,a,s,u,c,h,l,f,m=t[0],p=t[1],d=t[2],g=n[0],v=n[1],y=n[2],_=numeric.ccsDim(t),x=numeric.ccsDim(n),w=_[0],b=(_[1],x[1]),M=numeric.rep([w],0),k=numeric.rep([w],0),A=Array(w),T=numeric.rep([b],0),S=[],j=[],N=[T,S,j];for(i=0;i!==b;++i){for(o=g[i],a=g[i+1],h=0,r=o;r<a;++r)for(l=v[r],f=y[r],s=m[l],u=m[l+1],e=s;e<u;++e)0===k[c=p[e]]&&(A[h]=c,k[c]=1,h+=1),M[c]=M[c]+d[e]*f;for(a=(o=T[i])+h,T[i+1]=a,r=h-1;-1!==r;--r)f=o+r,e=A[r],S[f]=e,j[f]=M[e],k[e]=0,M[e]=0;T[i+1]=T[i]+h}return N},numeric.ccsLUPSolve=function(t,n){var e=t.L,r=t.U,i=(t.P,n[0]),o=!1;"object"!=typeof i&&(i=(n=[[0,n.length],numeric.linspace(0,n.length-1),n])[0],o=!0);var a,s,u,c,h,l,f=n[1],m=n[2],p=e[0].length-1,d=i.length-1,g=numeric.rep([p],0),v=Array(p),y=numeric.rep([p],0),_=Array(p),x=numeric.rep([d+1],0),w=[],b=[],M=numeric.ccsTSolve,k=0;for(a=0;a<d;++a){for(h=0,u=i[a],c=i[a+1],s=u;s<c;++s)l=t.Pinv[f[s]],_[h]=l,y[l]=m[s],++h;for(_.length=h,M(e,y,g,_,v),s=_.length-1;-1!==s;--s)y[_[s]]=0;if(M(r,g,y,v,_),o)return y;for(s=v.length-1;-1!==s;--s)g[v[s]]=0;for(s=_.length-1;-1!==s;--s)l=_[s],w[k]=l,b[k]=y[l],y[l]=0,++k;x[a+1]=k}return[x,w,b]},numeric.ccsbinop=function(t,n){return void 0===n&&(n=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+n+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+t+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(t){var n,e=t[0],r=t[1],i=t[2],o=numeric.sup(r)+1,a=e.length,s=numeric.rep([o],0),u=Array(a),c=Array(a),h=numeric.rep([o],0);for(n=0;n<a;++n)h[r[n]]++;for(n=0;n<o;++n)s[n+1]=s[n]+h[n];var l,f,m=s.slice(0);for(n=0;n<a;++n)u[l=m[f=r[n]]]=e[n],c[l]=i[n],m[f]=m[f]+1;return[s,u,c]},numeric.ccsGather=function(t){var n,e,r,i,o,a=t[0],s=t[1],u=t[2],c=a.length-1,h=s.length,l=Array(h),f=Array(h),m=Array(h);for(o=0,n=0;n<c;++n)for(r=a[n],i=a[n+1],e=r;e!==i;++e)f[o]=n,l[o]=s[e],m[o]=u[e],++o;return[l,f,m]},numeric.sdim=function t(n,e,r){if(void 0===e&&(e=[]),"object"!=typeof n)return e;var i;for(i in void 0===r&&(r=0),r in e||(e[r]=0),n.length>e[r]&&(e[r]=n.length),n)n.hasOwnProperty(i)&&t(n[i],e,r+1);return e},numeric.sclone=function t(n,e,r){void 0===e&&(e=0),void 0===r&&(r=numeric.sdim(n).length);var i,o=Array(n.length);if(e===r-1){for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o}for(i in n)n.hasOwnProperty(i)&&(o[i]=t(n[i],e+1,r));return o},numeric.sdiag=function(t){var n,e,r=t.length,i=Array(r);for(n=r-1;n>=1;n-=2)e=n-1,i[n]=[],i[n][n]=t[n],i[e]=[],i[e][e]=t[e];return 0===n&&(i[0]=[],i[0][0]=t[n]),i},numeric.sidentity=function(t){return numeric.sdiag(numeric.rep([t],1))},numeric.stranspose=function(t){var n,e,r,i=[];for(n in t.length,t)if(t.hasOwnProperty(n))for(e in r=t[n])r.hasOwnProperty(e)&&("object"!=typeof i[e]&&(i[e]=[]),i[e][n]=r[e]);return i},numeric.sLUP=function(t,n){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(t,n){var e,r,i,o,a,s,u,c=t.length,h=(n.length,numeric.stranspose(n)),l=h.length,f=Array(c);for(i=c-1;i>=0;i--){for(u=[],e=t[i],a=l-1;a>=0;a--){for(o in s=0,r=h[a],e)e.hasOwnProperty(o)&&o in r&&(s+=e[o]*r[o]);s&&(u[a]=s)}f[i]=u}return f},numeric.sdotMV=function(t,n){var e,r,i,o,a=t.length,s=Array(a);for(r=a-1;r>=0;r--){for(i in o=0,e=t[r])e.hasOwnProperty(i)&&n[i]&&(o+=e[i]*n[i]);o&&(s[r]=o)}return s},numeric.sdotVM=function(t,n){var e,r,i,o,a=[];for(e in t)if(t.hasOwnProperty(e))for(r in i=n[e],o=t[e],i)i.hasOwnProperty(r)&&(a[r]||(a[r]=0),a[r]+=o*i[r]);return a},numeric.sdotVV=function(t,n){var e,r=0;for(e in t)t[e]&&n[e]&&(r+=t[e]*n[e]);return r},numeric.sdot=function(t,n){var e=numeric.sdim(t).length,r=numeric.sdim(n).length;switch(1e3*e+r){case 0:return t*n;case 1001:return numeric.sdotVV(t,n);case 2001:return numeric.sdotMV(t,n);case 1002:return numeric.sdotVM(t,n);case 2002:return numeric.sdotMM(t,n);default:throw new Error("numeric.sdot not implemented for tensors of order "+e+" and "+r)}},numeric.sscatter=function(t){var n,e,r,i,o=t[0].length,a=t.length,s=[];for(e=o-1;e>=0;--e)if(t[a-1][e]){for(i=s,r=0;r<a-2;r++)i[n=t[r][e]]||(i[n]=[]),i=i[n];i[t[r][e]]=t[r+1][e]}return s},numeric.sgather=function t(n,e,r){var i,o,a;for(o in void 0===e&&(e=[]),void 0===r&&(r=[]),i=r.length,n)if(n.hasOwnProperty(o))if(r[i]=parseInt(o),"number"==typeof(a=n[o])){if(a){if(0===e.length)for(o=i+1;o>=0;--o)e[o]=[];for(o=i;o>=0;--o)e[o].push(r[o]);e[i+1].push(a)}}else t(a,e,r);return r.length>i&&r.pop(),e},numeric.cLU=function(t){var n,e,r,i,o,a,s=t[0],u=t[1],c=t[2],h=s.length,l=0;for(n=0;n<h;n++)s[n]>l&&(l=s[n]);l++;var f,m=Array(l),p=Array(l),d=numeric.rep([l],1/0),g=numeric.rep([l],-1/0);for(r=0;r<h;r++)n=s[r],(e=u[r])<d[n]&&(d[n]=e),e>g[n]&&(g[n]=e);for(n=0;n<l-1;n++)g[n]>g[n+1]&&(g[n+1]=g[n]);for(n=l-1;n>=1;n--)d[n]<d[n-1]&&(d[n-1]=d[n]);for(n=0;n<l;n++)p[n]=numeric.rep([g[n]-d[n]+1],0),m[n]=numeric.rep([n-d[n]],0),d[n],g[n];for(r=0;r<h;r++)p[n=s[r]][u[r]-d[n]]=c[r];for(n=0;n<l-1;n++)for(i=n-d[n],_=p[n],e=n+1;d[e]<=n&&e<l;e++)if(o=n-d[e],a=g[n]-n,f=(x=p[e])[o]/_[i]){for(r=1;r<=a;r++)x[r+o]-=f*_[r+i];m[e][n-d[e]]=f}var v,y,_=[],x=[],w=[],b=[],M=[],k=[];for(h=0,v=0,n=0;n<l;n++){for(i=d[n],o=g[n],y=p[n],e=n;e<=o;e++)y[e-i]&&(_[h]=n,x[h]=e,w[h]=y[e-i],h++);for(y=m[n],e=i;e<n;e++)y[e-i]&&(b[v]=n,M[v]=e,k[v]=y[e-i],v++);b[v]=n,M[v]=n,k[v]=1,v++}return{U:[_,x,w],L:[b,M,k]}},numeric.cLUsolve=function(t,n){var e,r,i=t.L,o=t.U,a=numeric.clone(n),s=i[0],u=i[1],c=i[2],h=o[0],l=o[1],f=o[2],m=h.length,p=(s.length,a.length);for(r=0,e=0;e<p;e++){for(;u[r]<e;)a[e]-=c[r]*a[u[r]],r++;r++}for(r=m-1,e=p-1;e>=0;e--){for(;l[r]>e;)a[e]-=f[r]*a[l[r]],r--;a[e]/=f[r],r--}return a},numeric.cgrid=function(t,n){"number"==typeof t&&(t=[t,t]);var e,r,i,o=numeric.rep(t,-1);if("function"!=typeof n)switch(n){case"L":n=function(n,e){return n>=t[0]/2||e<t[1]/2};break;default:n=function(t,n){return!0}}for(i=0,e=1;e<t[0]-1;e++)for(r=1;r<t[1]-1;r++)n(e,r)&&(o[e][r]=i,i++);return o},numeric.cdelsq=function(t){var n,e,r,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(t),u=s[0],c=s[1],h=[],l=[],f=[];for(n=1;n<u-1;n++)for(e=1;e<c-1;e++)if(!(t[n][e]<0)){for(r=0;r<4;r++)i=n+a[r][0],o=e+a[r][1],t[i][o]<0||(h.push(t[n][e]),l.push(t[i][o]),f.push(-1));h.push(t[n][e]),l.push(t[n][e]),f.push(4)}return[h,l,f]},numeric.cdotMV=function(t,n){var e,r,i,o=t[0],a=t[1],s=t[2],u=o.length;for(i=0,r=0;r<u;r++)o[r]>i&&(i=o[r]);for(i++,e=numeric.rep([i],0),r=0;r<u;r++)e[o[r]]+=s[r]*n[a[r]];return e},numeric.Spline=function(t,n,e,r,i){this.x=t,this.yl=n,this.yr=e,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(t,n){var e,r,i,o=this.x,a=this.yl,s=this.yr,u=this.kl,c=this.kr,h=numeric.add,l=numeric.sub,f=numeric.mul;e=l(f(u[n],o[n+1]-o[n]),l(s[n+1],a[n])),r=h(f(c[n+1],o[n]-o[n+1]),l(s[n+1],a[n]));var m=(i=(t-o[n])/(o[n+1]-o[n]))*(1-i);return h(h(h(f(1-i,a[n]),f(i,s[n+1])),f(e,m*(1-i))),f(r,m*i))},numeric.Spline.prototype.at=function(t){if("number"==typeof t){var n,e,r,i=this.x,o=i.length,a=Math.floor;for(n=0,e=o-1;e-n>1;)i[r=a((n+e)/2)]<=t?n=r:e=r;return this._at(t,n)}o=t.length;var s,u=Array(o);for(s=o-1;-1!==s;--s)u[s]=this.at(t[s]);return u},numeric.Spline.prototype.diff=function(){var t,n,e,r=this.x,i=this.yl,o=this.yr,a=this.kl,s=this.kr,u=i.length,c=a,h=s,l=Array(u),f=Array(u),m=numeric.add,p=numeric.mul,d=numeric.div,g=numeric.sub;for(t=u-1;-1!==t;--t)n=r[t+1]-r[t],e=g(o[t+1],i[t]),l[t]=d(m(p(e,6),p(a[t],-4*n),p(s[t+1],-2*n)),n*n),f[t+1]=d(m(p(e,-6),p(a[t],2*n),p(s[t+1],4*n)),n*n);return new numeric.Spline(r,c,h,l,f)},numeric.Spline.prototype.roots=function(){function t(t){return t*t}var n=[],e=this.x,r=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],o=[o],a=[a]);var s,u,c,h,l,f,m,p,d,g,v,y,_,x,w,b,M,k,A,T,S,j,N,E=r.length,P=e.length-1,q=(n=Array(E),Math.sqrt);for(s=0;s!==E;++s){for(h=r[s],l=i[s],f=o[s],m=a[s],p=[],u=0;u!==P;u++){for(u>0&&l[u]*h[u]<0&&p.push(e[u]),b=e[u+1]-e[u],e[u],v=h[u],y=l[u+1],d=f[u]/b,_=(g=m[u+1]/b)+3*v+2*d-3*y,x=3*(g+d+2*(v-y)),(w=t(d-g+3*(v-y))+12*g*v)<=0?M=(k=_/x)>e[u]&&k<e[u+1]?[e[u],k,e[u+1]]:[e[u],e[u+1]]:(k=(_-q(w))/x,A=(_+q(w))/x,M=[e[u]],k>e[u]&&k<e[u+1]&&M.push(k),A>e[u]&&A<e[u+1]&&M.push(A),M.push(e[u+1])),S=M[0],k=this._at(S,u),c=0;c<M.length-1;c++)if(j=M[c+1],A=this._at(j,u),0!==k)if(0===A||k*A>0)S=j,k=A;else{for(var z=0;!((N=(k*j-A*S)/(k-A))<=S||N>=j);)if((T=this._at(N,u))*A>0)j=N,A=T,-1===z&&(k*=.5),z=-1;else{if(!(T*k>0))break;S=N,k=T,1===z&&(A*=.5),z=1}p.push(N),S=M[c+1],k=this._at(S,u)}else p.push(S),S=j,k=A;0===A&&p.push(j)}n[s]=p}return"number"==typeof this.yl[0]?n[0]:n},numeric.spline=function(t,n,e,r){var i,o=t.length,a=[],s=[],u=[],c=numeric.sub,h=numeric.mul,l=numeric.add;for(i=o-2;i>=0;i--)s[i]=t[i+1]-t[i],u[i]=c(n[i+1],n[i]);"string"!=typeof e&&"string"!=typeof r||(e=r="periodic");var f=[[],[],[]];switch(typeof e){case"undefined":a[0]=h(3/(s[0]*s[0]),u[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":a[0]=l(h(3/(s[o-2]*s[o-2]),u[o-2]),h(3/(s[0]*s[0]),u[0])),f[0].push(0,0,0),f[1].push(o-2,0,1),f[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=e,f[0].push(0),f[1].push(0),f[2].push(1)}for(i=1;i<o-1;i++)a[i]=l(h(3/(s[i-1]*s[i-1]),u[i-1]),h(3/(s[i]*s[i]),u[i])),f[0].push(i,i,i),f[1].push(i-1,i,i+1),f[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":a[o-1]=h(3/(s[o-2]*s[o-2]),u[o-2]),f[0].push(o-1,o-1),f[1].push(o-2,o-1),f[2].push(1/s[o-2],2/s[o-2]);break;case"string":f[1][f[1].length-1]=0;break;default:a[o-1]=r,f[0].push(o-1),f[1].push(o-1),f[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var m=Array(a.length);if("string"==typeof e)for(i=m.length-1;-1!==i;--i)m[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),a[i]),m[i][o-1]=m[i][0];else for(i=m.length-1;-1!==i;--i)m[i]=numeric.cLUsolve(numeric.cLU(f),a[i]);return m="number"==typeof n[0]?m[0]:numeric.transpose(m),new numeric.Spline(t,n,n,m,m)},numeric.fftpow2=function t(n,e){var r=n.length;if(1!==r){var i,o,a=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),h=Array(r/2),l=Array(r/2);for(o=r/2,i=r-1;-1!==i;--i)h[--o]=n[i],l[o]=e[i],--i,u[o]=n[i],c[o]=e[i];t(u,c),t(h,l),o=r/2;var f,m,p,d=-6.283185307179586/r;for(i=r-1;-1!==i;--i)-1==--o&&(o=r/2-1),m=a(f=d*i),p=s(f),n[i]=u[o]+m*h[o]-p*l[o],e[i]=c[o]+m*l[o]+p*h[o]}},numeric._ifftpow2=function t(n,e){var r=n.length;if(1!==r){var i,o,a=Math.cos,s=Math.sin,u=Array(r/2),c=Array(r/2),h=Array(r/2),l=Array(r/2);for(o=r/2,i=r-1;-1!==i;--i)h[--o]=n[i],l[o]=e[i],--i,u[o]=n[i],c[o]=e[i];t(u,c),t(h,l),o=r/2;var f,m,p,d=6.283185307179586/r;for(i=r-1;-1!==i;--i)-1==--o&&(o=r/2-1),m=a(f=d*i),p=s(f),n[i]=u[o]+m*h[o]-p*l[o],e[i]=c[o]+m*l[o]+p*h[o]}},numeric.ifftpow2=function(t,n){numeric._ifftpow2(t,n),numeric.diveq(t,t.length),numeric.diveq(n,n.length)},numeric.convpow2=function(t,n,e,r){var i,o,a,s,u;for(numeric.fftpow2(t,n),numeric.fftpow2(e,r),i=t.length-1;-1!==i;--i)o=t[i],s=n[i],a=e[i],u=r[i],t[i]=o*a-s*u,n[i]=o*u+s*a;numeric.ifftpow2(t,n)},numeric.T.prototype.fft=function(){var t,n,e=this.x,r=this.y,i=e.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),u=Math.pow(2,s),c=numeric.rep([u],0),h=numeric.rep([u],0),l=Math.cos,f=Math.sin,m=-3.141592653589793/i,p=numeric.rep([u],0),d=numeric.rep([u],0);for(Math.floor(i/2),t=0;t<i;t++)p[t]=e[t];if(void 0!==r)for(t=0;t<i;t++)d[t]=r[t];for(c[0]=1,t=1;t<=u/2;t++)n=m*t*t,c[t]=l(n),h[t]=f(n),c[u-t]=l(n),h[u-t]=f(n);var g=new numeric.T(p,d),v=new numeric.T(c,h);return g=g.mul(v),numeric.convpow2(g.x,g.y,numeric.clone(v.x),numeric.neg(v.y)),(g=g.mul(v)).x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var t,n,e=this.x,r=this.y,i=e.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),u=Math.pow(2,s),c=numeric.rep([u],0),h=numeric.rep([u],0),l=Math.cos,f=Math.sin,m=3.141592653589793/i,p=numeric.rep([u],0),d=numeric.rep([u],0);for(Math.floor(i/2),t=0;t<i;t++)p[t]=e[t];if(void 0!==r)for(t=0;t<i;t++)d[t]=r[t];for(c[0]=1,t=1;t<=u/2;t++)n=m*t*t,c[t]=l(n),h[t]=f(n),c[u-t]=l(n),h[u-t]=f(n);var g=new numeric.T(p,d),v=new numeric.T(c,h);return g=g.mul(v),numeric.convpow2(g.x,g.y,numeric.clone(v.x),numeric.neg(v.y)),(g=g.mul(v)).x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(t,n){var e=n.length,r=t(n);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,o,a,s,u,c,h,l,f,m=Math.max,p=numeric.clone(n),d=Array(e),g=(numeric.div,numeric.sub,m=Math.max,Math.abs),v=Math.min,y=0;for(i=0;i<e;i++)for(var _=m(1e-6*r,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(p[i]=n[i]+_,o=t(p),p[i]=n[i]-_,a=t(p),p[i]=n[i],isNaN(o)||isNaN(a))_/=16;else{if(d[i]=(o-a)/(2*_),s=n[i]-_,u=n[i],c=n[i]+_,h=(o-r)/_,l=(r-a)/_,f=m(g(d[i]),g(r),g(o),g(a),g(s),g(u),g(c),1e-8),!(v(m(g(h-d[i]),g(l-d[i]),g(h-l))/f,_/f)>.001))break;_/=16}}return d},numeric.uncmin=function(t,n,e,r,i,o,a){var s=numeric.gradient;void 0===a&&(a={}),void 0===e&&(e=1e-8),void 0===r&&(r=function(n){return s(t,n)}),void 0===i&&(i=1e3);var u,c,h=(n=numeric.clone(n)).length,l=t(n);if(isNaN(l))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,m=numeric.norm2;e=f(e,numeric.epsilon);var p,d,g,v,y,_,x,w,b,M,k=a.Hinv||numeric.identity(h),A=numeric.dot,T=(numeric.inv,numeric.sub),S=numeric.add,j=numeric.tensor,N=numeric.div,E=numeric.mul,P=numeric.all,q=numeric.isFinite,z=numeric.neg,V=0,L="";for(d=r(n);V<i;){if("function"==typeof o&&o(V,n,l,d,k)){L="Callback returned true";break}if(!P(q(d))){L="Gradient has Infinity or NaN";break}if(!P(q(p=z(A(k,d))))){L="Search direction has Infinity or NaN";break}if((M=m(p))<e){L="Newton step smaller than tol";break}for(b=1,c=A(d,p),y=n;V<i&&!(b*M<e)&&(y=S(n,v=E(p,b)),(u=t(y))-l>=.1*b*c||isNaN(u));)b*=.5,++V;if(b*M<e){L="Line search step size smaller than tol";break}if(V===i){L="maxit reached during line search";break}w=A(_=T(g=r(y),d),v),x=A(k,_),k=T(S(k,E((w+A(_,x))/(w*w),j(v,v))),N(S(j(x,v),j(v,x)),w)),n=y,l=u,d=g,++V}return{solution:n,f:l,gradient:d,invHessian:k,iterations:V,message:L}},numeric.Dopri=function(t,n,e,r,i,o,a){this.x=t,this.y=n,this.f=e,this.ymid=r,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(t,n){function e(t){return t*t}var r,i,o,a,s,u,c,h,l,f=this,m=f.x,p=f.y,d=f.f,g=f.ymid,v=(m.length,Math.floor,numeric.add),y=numeric.mul,_=numeric.sub;return r=m[n],i=m[n+1],a=p[n],s=p[n+1],o=r+.5*(i-r),u=g[n],c=_(d[n],y(a,1/(r-o)+2/(r-i))),h=_(d[n+1],y(s,1/(i-o)+2/(i-r))),v(v(v(v(y(a,(l=[e(t-i)*(t-o)/e(r-i)/(r-o),e(t-r)*e(t-i)/e(r-o)/e(i-o),e(t-r)*(t-o)/e(i-r)/(i-o),(t-r)*e(t-i)*(t-o)/e(r-i)/(r-o),(t-i)*e(t-r)*(t-o)/e(r-i)/(i-o)])[0]),y(u,l[1])),y(s,l[2])),y(c,l[3])),y(h,l[4]))},numeric.Dopri.prototype.at=function(t){var n,e,r,i=Math.floor;if("number"!=typeof t){var o=t.length,a=Array(o);for(n=o-1;-1!==n;--n)a[n]=this.at(t[n]);return a}var s=this.x;for(n=0,e=s.length-1;e-n>1;)s[r=i(.5*(n+e))]<=t?n=r:e=r;return this._at(t,n)},numeric.dopri=function(t,n,e,r,i,o,a){void 0===i&&(i=1e-6),void 0===o&&(o=1e3);var s,u,c,h,l,f,m,p,d,g,v,y,_,x=[t],w=[e],b=[r(t,e)],M=[],k=[3/40,9/40],A=[44/45,-56/15,32/9],T=[19372/6561,-25360/2187,64448/6561,-212/729],S=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],j=[35/384,0,500/1113,125/192,-2187/6784,11/84],N=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],E=[.2,.3,.8,8/9,1,1],P=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],q=0,z=(n-t)/10,V=0,L=numeric.add,O=numeric.mul,R=(Math.max,Math.min),C=Math.abs,I=numeric.norminf,F=Math.pow,X=numeric.any,D=numeric.lt,B=numeric.and,$=(numeric.sub,new numeric.Dopri(x,w,b,M,-1,""));for("function"==typeof a&&(v=a(t,e));t<n&&V<o;)if(++V,t+z>n&&(z=n-t),s=r(t+E[0]*z,L(e,O(.2*z,b[q]))),u=r(t+E[1]*z,L(L(e,O(k[0]*z,b[q])),O(k[1]*z,s))),c=r(t+E[2]*z,L(L(L(e,O(A[0]*z,b[q])),O(A[1]*z,s)),O(A[2]*z,u))),h=r(t+E[3]*z,L(L(L(L(e,O(T[0]*z,b[q])),O(T[1]*z,s)),O(T[2]*z,u)),O(T[3]*z,c))),l=r(t+E[4]*z,L(L(L(L(L(e,O(S[0]*z,b[q])),O(S[1]*z,s)),O(S[2]*z,u)),O(S[3]*z,c)),O(S[4]*z,h))),f=r(t+z,d=L(L(L(L(L(e,O(b[q],z*j[0])),O(u,z*j[2])),O(c,z*j[3])),O(h,z*j[4])),O(l,z*j[5]))),(g="number"==typeof(m=L(L(L(L(L(O(b[q],z*P[0]),O(u,z*P[2])),O(c,z*P[3])),O(h,z*P[4])),O(l,z*P[5])),O(f,z*P[6])))?C(m):I(m))>i){if(t+(z=.2*z*F(i/g,.25))===t){$.msg="Step size became too small";break}}else{if(M[q]=L(L(L(L(L(L(e,O(b[q],z*N[0])),O(u,z*N[2])),O(c,z*N[3])),O(h,z*N[4])),O(l,z*N[5])),O(f,z*N[6])),x[++q]=t+z,w[q]=d,b[q]=f,"function"==typeof a){var U,Y,H=t,Q=t+.5*z;if(y=a(Q,M[q-1]),X(_=B(D(v,0),D(0,y)))||(H=Q,v=y,y=a(Q=t+z,d),_=B(D(v,0),D(0,y))),X(_)){for(var Z,G,K=0,W=1,J=1;;){if("number"==typeof v)Y=(J*y*H-W*v*Q)/(J*y-W*v);else for(Y=Q,p=v.length-1;-1!==p;--p)v[p]<0&&y[p]>0&&(Y=R(Y,(J*y[p]*H-W*v[p]*Q)/(J*y[p]-W*v[p])));if(Y<=H||Y>=Q)break;G=a(Y,U=$._at(Y,q-1)),X(Z=B(D(v,0),D(0,G)))?(Q=Y,y=G,_=Z,J=1,-1===K?W*=.5:W=1,K=-1):(H=Y,v=G,W=1,1===K?J*=.5:J=1,K=1)}return d=$._at(.5*(t+Y),q-1),$.f[q]=r(Y,U),$.x[q]=Y,$.y[q]=U,$.ymid[q-1]=d,$.events=_,$.iterations=V,$}}t+=z,e=d,v=y,z=R(.8*z*F(i/g,.25),4*z)}return $.iterations=V,$},numeric.LU=function(t,n){n=n||!1;var e,r,i,o,a,s,u,c,h,l=Math.abs,f=t.length,m=f-1,p=new Array(f);for(n||(t=numeric.clone(t)),i=0;i<f;++i){for(u=i,h=l((s=t[i])[i]),r=i+1;r<f;++r)h<(o=l(t[r][i]))&&(h=o,u=r);for(p[i]=u,u!=i&&(t[i]=t[u],t[u]=s,s=t[i]),a=s[i],e=i+1;e<f;++e)t[e][i]/=a;for(e=i+1;e<f;++e){for(c=t[e],r=i+1;r<m;++r)c[r]-=c[i]*s[r],c[++r]-=c[i]*s[r];r===m&&(c[r]-=c[i]*s[r])}}return{LU:t,P:p}},numeric.LUsolve=function(t,n){var e,r,i,o,a,s=t.LU,u=s.length,c=numeric.clone(n),h=t.P;for(e=u-1;-1!==e;--e)c[e]=n[e];for(e=0;e<u;++e)for(i=h[e],h[e]!==e&&(a=c[e],c[e]=c[i],c[i]=a),o=s[e],r=0;r<e;++r)c[e]-=c[r]*o[r];for(e=u-1;e>=0;--e){for(o=s[e],r=e+1;r<u;++r)c[e]-=c[r]*o[r];c[e]/=o[e]}return c},numeric.solve=function(t,n,e){return numeric.LUsolve(numeric.LU(t,e),n)},numeric.echelonize=function(t){var n,e,r,i,o,a,s,u,c=numeric.dim(t),h=c[0],l=c[1],f=numeric.identity(h),m=Array(h),p=Math.abs,d=numeric.diveq;for(t=numeric.clone(t),n=0;n<h;++n){for(r=0,o=t[n],a=f[n],e=1;e<l;++e)p(o[r])<p(o[e])&&(r=e);for(m[n]=r,d(a,o[r]),d(o,o[r]),e=0;e<h;++e)if(e!==n){for(u=(s=t[e])[r],i=l-1;-1!==i;--i)s[i]-=o[i]*u;for(s=f[e],i=h-1;-1!==i;--i)s[i]-=a[i]*u}}return{I:f,A:t,P:m}},numeric.__solveLP=function(t,n,e,r,i,o,a){var s,u,c,h,l=numeric.sum,f=(numeric.log,numeric.mul),m=numeric.sub,p=numeric.dot,d=numeric.div,g=numeric.add,v=t.length,y=e.length,_=!1,x=1,w=(numeric.transpose(n),numeric.svd,numeric.transpose),b=(numeric.leq,Math.sqrt),M=Math.abs,k=(numeric.muleq,numeric.norminf,numeric.any,Math.min),A=numeric.all,T=numeric.gt,S=Array(v),j=Array(y),N=(numeric.rep([y],1),numeric.solve),E=m(e,p(n,o)),P=p(t,t);for(c=0;c<i;++c){var q,z;for(q=y-1;-1!==q;--q)j[q]=d(n[q],E[q]);var V=w(j);for(q=v-1;-1!==q;--q)S[q]=l(V[q]);x=.25*M(P/p(t,S));var L=100*b(P/p(S,S));for((!isFinite(x)||x>L)&&(x=L),h=g(t,f(x,S)),u=p(V,j),q=v-1;-1!==q;--q)u[q][q]+=1;z=N(u,d(h,x),!0);var O=d(E,p(n,z)),R=1;for(q=y-1;-1!==q;--q)O[q]<0&&(R=k(R,-.999*O[q]));if(s=m(o,f(z,R)),!A(T(E=m(e,p(n,s)),0)))return{solution:o,message:"",iterations:c};if(o=s,x<r)return{solution:s,message:"",iterations:c};if(a){var C=p(t,h),I=p(n,h);for(_=!0,q=y-1;-1!==q;--q)if(C*I[q]<0){_=!1;break}}else _=!(o[v-1]>=0);if(_)return{solution:s,message:"Unbounded",iterations:c}}return{solution:o,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(t,n,e,r,i){var o=t.length,a=e.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),h=numeric.rep([a,1],-1),l=numeric.blockMatrix([[n,h]]),f=e,m=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(e)))+1),p=numeric.__solveLP(c,l,f,r,i,m,!1),d=numeric.clone(p.solution);if(d.length=o,numeric.inf(s(e,u(n,d)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var g=numeric.__solveLP(t,n,e,r,i-p.iterations,d,!0);return g.iterations+=p.iterations,g},numeric.solveLP=function(t,n,e,r,i,o,a){if(void 0===a&&(a=1e3),void 0===o&&(o=numeric.epsilon),void 0===r)return numeric._solveLP(t,n,e,o,a);var s,u=r.length,c=r[0].length,h=n.length,l=numeric.echelonize(r),f=numeric.rep([c],0),m=l.P,p=[];for(s=m.length-1;-1!==s;--s)f[m[s]]=1;for(s=c-1;-1!==s;--s)0===f[s]&&p.push(s);var d=numeric.getRange,g=numeric.linspace(0,u-1),v=numeric.linspace(0,h-1),y=d(r,g,p),_=d(n,v,m),x=d(n,v,p),w=numeric.dot,b=numeric.sub,M=w(_,l.I),k=b(x,w(M,y)),A=b(e,w(M,i)),T=Array(m.length),S=Array(p.length);for(s=m.length-1;-1!==s;--s)T[s]=t[m[s]];for(s=p.length-1;-1!==s;--s)S[s]=t[p[s]];var j=b(S,w(T,w(l.I,y))),N=numeric._solveLP(j,k,A,o,a),E=N.solution;if(E!=E)return N;var P=w(l.I,b(i,w(y,E))),q=Array(t.length);for(s=m.length-1;-1!==s;--s)q[m[s]]=P[s];for(s=p.length-1;-1!==s;--s)q[p[s]]=E[s];return{solution:q,message:N.message,iterations:N.iterations}},numeric.MPStoLP=function(t){t instanceof String&&t.split("\n");var n,e,r,i,o=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=t.length,u=0,c={},h=[],l=0,f={},m=0,p=[],d=[],g=[];function v(e){throw new Error("MPStoLP: "+e+"\nLine "+n+": "+t[n]+"\nCurrent state: "+a[o]+"\n")}for(n=0;n<s;++n){var y=(r=t[n]).match(/\S*/g),_=[];for(e=0;e<y.length;++e)""!==y[e]&&_.push(y[e]);if(0!==_.length){for(e=0;e<a.length&&r.substr(0,a[e].length)!==a[e];++e);if(e<a.length){if(o=e,1===e&&(i=_[1]),6===e)return{name:i,c:p,A:numeric.transpose(d),b:g,rows:c,vars:f}}else switch(o){case 0:case 1:v("Unexpected line");case 2:switch(_[0]){case"N":0===u?u=_[1]:v("Two or more N rows");break;case"L":c[_[1]]=l,h[l]=1,g[l]=0,++l;break;case"G":c[_[1]]=l,h[l]=-1,g[l]=0,++l;break;case"E":c[_[1]]=l,h[l]=0,g[l]=0,++l;break;default:v("Parse error "+numeric.prettyPrint(_))}break;case 3:f.hasOwnProperty(_[0])||(f[_[0]]=m,p[m]=0,d[m]=numeric.rep([l],0),++m);var x=f[_[0]];for(e=1;e<_.length;e+=2)if(_[e]!==u){var w=c[_[e]];d[x][w]=(h[w]<0?-1:1)*parseFloat(_[e+1])}else p[x]=parseFloat(_[e+1]);break;case 4:for(e=1;e<_.length;e+=2)g[c[_[e]]]=(h[c[_[e]]]<0?-1:1)*parseFloat(_[e+1]);break;case 5:break;case 6:v("Internal error")}}}v("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(t,n,e,r,i,o,a){function s(t){var n,r,i=this,o=t.length,a=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(t=[o++]);a<e;)i.S[a]=a++;for(a=0;a<e;a++)s=h(s+(n=i.S[a])+t[a%o]),r=i.S[s],i.S[a]=r,i.S[s]=n;i.g=function(t){var n=i.S,r=h(i.i+1),o=n[r],a=h(i.j+o),s=n[a];n[r]=s,n[a]=o;for(var u=n[h(o+s)];--t;)r=h(r+1),s=n[a=h(a+(o=n[r]))],n[r]=s,n[a]=o,u=u*e+n[h(o+s)];return i.i=r,i.j=a,u},i.g(e)}function u(t,n,e,r,i){if(e=[],i=typeof t,n&&"object"==i)for(r in t)if(r.indexOf("S")<5)try{e.push(u(t[r],n-1))}catch(t){}return e.length?e:t+("string"!=i?"\0":"")}function c(t,n,e,r){for(t+="",e=0,r=0;r<t.length;r++)n[h(r)]=h((e^=19*n[h(r)])+t.charCodeAt(r));for(r in t="",n)t+=String.fromCharCode(n[r]);return t}function h(t){return 255&t}n.seedrandom=function(r,h){var l,f=[];return r=c(u(h?[r,t]:arguments.length?r:[(new Date).getTime(),t,window],3),f),c((l=new s(f)).S,t),n.random=function(){for(var t=l.g(6),n=a,r=0;t<i;)t=(t+r)*e,n*=e,r=l.g(1);for(;t>=o;)t/=2,n/=2,r>>>=1;return(t+r)/n},r},a=n.pow(e,6),i=n.pow(2,i),o=2*i,c(n.random(),t)}([],numeric.seedrandom,256,0,52),function(t){function n(t){if("object"!=typeof t)return t;var e,r=[],i=t.length;for(e=0;e<i;e++)r[e+1]=n(t[e]);return r}function e(t){if("object"!=typeof t)return t;var n,r=[],i=t.length;for(n=1;n<i;n++)r[n-1]=e(t[n]);return r}t.solveQP=function(t,r,i,o,a,s){t=n(t),r=n(r),i=n(i);var u,c,h,l,f,m=[],p=[],d=[],g=[],v=[];if(a=a||0,s=s?n(s):[void 0,0],o=o?n(o):[],c=t.length-1,h=i[1].length-1,!o)for(u=1;u<=h;u+=1)o[u]=0;for(u=1;u<=h;u+=1)p[u]=0;for(l=Math.min(c,h),u=1;u<=c;u+=1)d[u]=0;for(m[1]=0,u=1;u<=2*c+l*(l+5)/2+2*h+1;u+=1)g[u]=0;for(u=1;u<=2;u+=1)v[u]=0;return function(t,n,e,r,i,o,a,s,u,c,h,l,f,m,p,d){var g,v,y,_,x,w,b,M,k,A,T,S,j,N,E,P,q,z,V,L,O,R,C,I,F,X,D;j=Math.min(r,c),y=2*r+j*(j+5)/2+2*c+1,I=1e-60;do{F=1+.1*(I+=I),X=1+.2*I}while(F<=1||X<=1);for(g=1;g<=r;g+=1)p[g]=n[g];for(g=r+1;g<=y;g+=1)p[g]=0;for(g=1;g<=c;g+=1)l[g]=0;if(x=[],0===d[1]){if(function(t,n,e,r){var i,o,a,s,u,c;for(o=1;o<=e;o+=1){if(r[1]=o,c=0,(a=o-1)<1){if((c=t[o][o]-c)<=0)break;t[o][o]=Math.sqrt(c)}else{for(s=1;s<=a;s+=1){for(u=t[s][o],i=1;i<s;i+=1)u-=t[i][o]*t[i][s];u/=t[s][s],t[s][o]=u,c+=u*u}if((c=t[o][o]-c)<=0)break;t[o][o]=Math.sqrt(c)}r[1]=0}}(t,0,r,x),0!==x[1])return void(d[1]=2);!function(t,n,e,r){var i,o,a,s;for(o=1;o<=e;o+=1){for(s=0,i=1;i<o;i+=1)s+=t[i][o]*r[i];r[o]=(r[o]-s)/t[o][o]}for(a=1;a<=e;a+=1)for(r[o=e+1-a]=r[o]/t[o][o],s=-r[o],i=1;i<o;i+=1)r[i]=r[i]+s*t[i][o]}(t,0,r,n),function(t,n,e){var r,i,o,a,s;for(o=1;o<=e;o+=1){for(t[o][o]=1/t[o][o],s=-t[o][o],r=1;r<o;r+=1)t[r][o]=s*t[r][o];if(e<(a=o+1))break;for(i=a;i<=e;i+=1)for(s=t[o][i],t[o][i]=0,r=1;r<=o;r+=1)t[r][i]=t[r][i]+s*t[r][o]}}(t,0,r)}else{for(v=1;v<=r;v+=1)for(i[v]=0,g=1;g<=v;g+=1)i[v]=i[v]+t[g][v]*n[g];for(v=1;v<=r;v+=1)for(n[v]=0,g=v;g<=r;g+=1)n[v]=n[v]+t[v][g]*i[g]}for(o[1]=0,v=1;v<=r;v+=1)for(i[v]=n[v],o[1]=o[1]+p[v]*i[v],p[v]=0,g=v+1;g<=r;g+=1)t[g][v]=0;for(o[1]=-o[1]/2,d[1]=0,N=(A=(k=(T=(M=(b=r)+r)+j)+j+1)+j*(j+1)/2)+c,g=1;g<=c;g+=1){for(P=0,v=1;v<=r;v+=1)P+=a[v][g]*a[v][g];p[N+g]=Math.sqrt(P)}function B(){for(m[1]=m[1]+1,y=A,g=1;g<=c;g+=1){for(y+=1,P=-s[g],v=1;v<=r;v+=1)P+=a[v][g]*i[v];if(Math.abs(P)<I&&(P=0),g>h)p[y]=P;else if(p[y]=-Math.abs(P),P>0){for(v=1;v<=r;v+=1)a[v][g]=-a[v][g];s[g]=-s[g]}}for(g=1;g<=f;g+=1)p[A+l[g]]=0;for(S=0,E=0,g=1;g<=c;g+=1)p[A+g]<E*p[N+g]&&(S=g,E=p[A+g]/p[N+g]);return 0===S?999:0}function $(){for(g=1;g<=r;g+=1){for(P=0,v=1;v<=r;v+=1)P+=t[v][g]*a[v][S];p[g]=P}for(_=b,g=1;g<=r;g+=1)p[_+g]=0;for(v=f+1;v<=r;v+=1)for(g=1;g<=r;g+=1)p[_+g]=p[_+g]+t[g][v]*p[v];for(R=!0,g=f;g>=1;g-=1){for(P=p[g],_=(y=k+g*(g+3)/2)-g,v=g+1;v<=f;v+=1)P-=p[y]*p[M+v],y+=v;if(P/=p[_],p[M+g]=P,l[g]<h)break;if(P<0)break;R=!1,w=g}if(!R)for(q=p[T+w]/p[M+w],g=1;g<=f&&!(l[g]<h)&&!(p[M+g]<0);g+=1)(E=p[T+g]/p[M+g])<q&&(q=E,w=g);for(P=0,g=b+1;g<=b+r;g+=1)P+=p[g]*p[g];if(Math.abs(P)<=I){if(R)return d[1]=1,999;for(g=1;g<=f;g+=1)p[T+g]=p[T+g]-q*p[M+g];return p[T+f+1]=p[T+f+1]+q,700}for(P=0,g=1;g<=r;g+=1)P+=p[b+g]*a[g][S];for(z=-p[A+S]/P,C=!0,R||q<z&&(z=q,C=!1),g=1;g<=r;g+=1)i[g]=i[g]+z*p[b+g],Math.abs(i[g])<I&&(i[g]=0);for(o[1]=o[1]+z*P*(z/2+p[T+f+1]),g=1;g<=f;g+=1)p[T+g]=p[T+g]-z*p[M+g];if(p[T+f+1]=p[T+f+1]+z,!C){for(P=-s[S],v=1;v<=r;v+=1)P+=i[v]*a[v][S];if(S>h)p[A+S]=P;else if(p[A+S]=-Math.abs(P),P>0){for(v=1;v<=r;v+=1)a[v][S]=-a[v][S];s[S]=-s[S]}return 700}for(l[f+=1]=S,y=k+(f-1)*f/2+1,g=1;g<=f-1;g+=1)p[y]=p[g],y+=1;if(f===r)p[y]=p[r];else{for(g=r;g>=f+1&&0!==p[g]&&(V=Math.max(Math.abs(p[g-1]),Math.abs(p[g])),L=Math.min(Math.abs(p[g-1]),Math.abs(p[g])),E=p[g-1]>=0?Math.abs(V*Math.sqrt(1+L*L/(V*V))):-Math.abs(V*Math.sqrt(1+L*L/(V*V))),V=p[g-1]/E,L=p[g]/E,1!==V);g-=1)if(0===V)for(p[g-1]=L*E,v=1;v<=r;v+=1)E=t[v][g-1],t[v][g-1]=t[v][g],t[v][g]=E;else for(p[g-1]=E,O=L/(1+V),v=1;v<=r;v+=1)E=V*t[v][g-1]+L*t[v][g],t[v][g]=O*(t[v][g-1]+E)-t[v][g],t[v][g-1]=E;p[y]=p[f]}return 0}function U(){if(0===p[_=(y=k+w*(w+1)/2+1)+w])return 798;if(V=Math.max(Math.abs(p[_-1]),Math.abs(p[_])),L=Math.min(Math.abs(p[_-1]),Math.abs(p[_])),E=p[_-1]>=0?Math.abs(V*Math.sqrt(1+L*L/(V*V))):-Math.abs(V*Math.sqrt(1+L*L/(V*V))),V=p[_-1]/E,L=p[_]/E,1===V)return 798;if(0===V){for(g=w+1;g<=f;g+=1)E=p[_-1],p[_-1]=p[_],p[_]=E,_+=g;for(g=1;g<=r;g+=1)E=t[g][w],t[g][w]=t[g][w+1],t[g][w+1]=E}else{for(O=L/(1+V),g=w+1;g<=f;g+=1)E=V*p[_-1]+L*p[_],p[_]=O*(p[_-1]+E)-p[_],p[_-1]=E,_+=g;for(g=1;g<=r;g+=1)E=V*t[g][w]+L*t[g][w+1],t[g][w+1]=O*(t[g][w]+E)-t[g][w+1],t[g][w]=E}return 0}function Y(){for(_=y-w,g=1;g<=w;g+=1)p[_]=p[y],y+=1,_+=1;return p[T+w]=p[T+w+1],l[w]=l[w+1],(w+=1)<f?797:0}function H(){return p[T+f]=p[T+f+1],p[T+f+1]=0,l[f]=0,f-=1,m[2]=m[2]+1,0}for(f=0,m[1]=0,m[2]=0,D=0;;){if(999===(D=B()))return;for(;0!==(D=$());){if(999===D)return;if(700===D)if(w===f)H();else{for(;U(),797===(D=Y()););H()}}}}(t,r,0,c,d,m,i,o,0,h,a,p,0,v,g,s),f="",1===s[1]&&(f="constraints are inconsistent, no solution!"),2===s[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:e(d),value:e(m),unconstrained_solution:e(r),iterations:e(v),iact:e(p),message:f}}}(numeric),numeric.svd=function(t){var n,e=numeric.epsilon,r=1e-64/e,i=0,o=0,a=0,s=0,u=0,c=numeric.clone(t),h=c.length,l=c[0].length;if(h<l)throw"Need more rows than columns";var f=new Array(l),m=new Array(l);for(o=0;o<l;o++)f[o]=m[o]=0;var p=numeric.rep([l,l],0);function d(t,n){return(t=Math.abs(t))>(n=Math.abs(n))?t*Math.sqrt(1+n*n/t/t):0===n?t:n*Math.sqrt(1+t*t/n/n)}var g=0,v=0,y=0,_=0,x=0,w=0,b=0;for(o=0;o<l;o++){for(f[o]=v,b=0,u=o+1,a=o;a<h;a++)b+=c[a][o]*c[a][o];if(b<=r)v=0;else for(g=c[o][o],v=Math.sqrt(b),g>=0&&(v=-v),y=g*v-b,c[o][o]=g-v,a=u;a<l;a++){for(b=0,s=o;s<h;s++)b+=c[s][o]*c[s][a];for(g=b/y,s=o;s<h;s++)c[s][a]+=g*c[s][o]}for(m[o]=v,b=0,a=u;a<l;a++)b+=c[o][a]*c[o][a];if(b<=r)v=0;else{for(g=c[o][o+1],v=Math.sqrt(b),g>=0&&(v=-v),y=g*v-b,c[o][o+1]=g-v,a=u;a<l;a++)f[a]=c[o][a]/y;for(a=u;a<h;a++){for(b=0,s=u;s<l;s++)b+=c[a][s]*c[o][s];for(s=u;s<l;s++)c[a][s]+=b*f[s]}}(x=Math.abs(m[o])+Math.abs(f[o]))>_&&(_=x)}for(o=l-1;-1!==o;o+=-1){if(0!==v){for(y=v*c[o][o+1],a=u;a<l;a++)p[a][o]=c[o][a]/y;for(a=u;a<l;a++){for(b=0,s=u;s<l;s++)b+=c[o][s]*p[s][a];for(s=u;s<l;s++)p[s][a]+=b*p[s][o]}}for(a=u;a<l;a++)p[o][a]=0,p[a][o]=0;p[o][o]=1,v=f[o],u=o}for(o=l-1;-1!==o;o+=-1){for(u=o+1,v=m[o],a=u;a<l;a++)c[o][a]=0;if(0!==v){for(y=c[o][o]*v,a=u;a<l;a++){for(b=0,s=u;s<h;s++)b+=c[s][o]*c[s][a];for(g=b/y,s=o;s<h;s++)c[s][a]+=g*c[s][o]}for(a=o;a<h;a++)c[a][o]=c[a][o]/v}else for(a=o;a<h;a++)c[a][o]=0;c[o][o]+=1}for(e*=_,s=l-1;-1!==s;s+=-1){var M=!1;for(u=s;-1!==u;u+=-1){if(Math.abs(f[u])<=e){M=!0;break}if(Math.abs(m[u-1])<=e)break}if(!M){i=0,b=1;var k=u-1;for(o=u;o<s+1&&(g=b*f[o],f[o]=i*f[o],!(Math.abs(g)<=e));o++)for(y=d(g,v=m[o]),m[o]=y,i=v/y,b=-g/y,a=0;a<h;a++)x=c[a][k],w=c[a][o],c[a][k]=x*i+w*b,c[a][o]=-x*b+w*i}if(w=m[s],u===s){if(w<0)for(m[s]=-w,a=0;a<l;a++)p[a][s]=-p[a][s];break}for(_=m[u],v=d(g=(((x=m[s-1])-w)*(x+w)+((v=f[s-1])-(y=f[s]))*(v+y))/(2*y*x),1),g=g<0?((_-w)*(_+w)+y*(x/(g-v)-y))/_:((_-w)*(_+w)+y*(x/(g+v)-y))/_,i=1,b=1,o=u+1;o<s+1;o++){for(v=f[o],x=m[o],y=b*v,v*=i,w=d(g,y),f[o-1]=w,g=_*(i=g/w)+v*(b=y/w),v=-_*b+v*i,y=x*b,x*=i,a=0;a<l;a++)_=p[a][o-1],w=p[a][o],p[a][o-1]=_*i+w*b,p[a][o]=-_*b+w*i;for(w=d(g,y),m[o-1]=w,g=(i=g/w)*v+(b=y/w)*x,_=-b*v+i*x,a=0;a<h;a++)x=c[a][o-1],w=c[a][o],c[a][o-1]=x*i+w*b,c[a][o]=-x*b+w*i}f[u]=0,f[s]=g,m[s]=_}for(o=0;o<m.length;o++)m[o]<e&&(m[o]=0);for(o=0;o<l;o++)for(a=o-1;a>=0;a--)if(m[a]<m[o]){for(i=m[a],m[a]=m[o],m[o]=i,s=0;s<c.length;s++)n=c[s][o],c[s][o]=c[s][a],c[s][a]=n;for(s=0;s<p.length;s++)n=p[s][o],p[s][o]=p[s][a],p[s][a]=n;o=a}return p};var A=[[22,10,2,3,7],[14,7,10,0,8],[1,13,1,11,3],[3,2,13,2,4],[9,8,1,2,4],[9,1,7,5,1],[2,6,6,5,1],[4,5,0,2,2]]}},__webpack_module_cache__={};function __webpack_require__(t){var n=__webpack_module_cache__[t];if(void 0!==n)return n.exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](e,e.exports,__webpack_require__),e.exports}__webpack_require__.d=(t,n)=>{for(var e in n)__webpack_require__.o(n,e)&&!__webpack_require__.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{newChart:()=>oa});var t={value:()=>{}};function n(){for(var t,n=0,r=arguments.length,i={};n<r;++n){if(!(t=arguments[n]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new e(i)}function e(t){this._=t}function r(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function i(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function o(n,e,r){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=t,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=r&&n.push({name:e,value:r}),n}e.prototype=n.prototype={constructor:e,on:function(t,n){var e,a=this._,s=r(t+"",a),u=-1,c=s.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<c;)if(e=(t=s[u]).type)a[e]=o(a[e],t.name,n);else if(null==n)for(e in a)a[e]=o(a[e],t.name,null);return this}for(;++u<c;)if((e=(t=s[u]).type)&&(e=i(a[e],t.name)))return e},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new e(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};const a=n;function s(){}function u(t){return null==t?s:function(){return this.querySelector(t)}}function c(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function h(){return[]}function l(t){return null==t?h:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function m(t){return function(n){return n.matches(t)}}var p=Array.prototype.find;function d(){return this.firstElementChild}var g=Array.prototype.filter;function v(){return this.children}function y(t){return new Array(t.length)}function _(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function x(t){return function(){return t}}function w(t,n,e,r,i,o){for(var a,s=0,u=n.length,c=o.length;s<c;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new _(t,o[s]);for(;s<u;++s)(a=n[s])&&(i[s]=a)}function b(t,n,e,r,i,o,a){var s,u,c,h=new Map,l=n.length,f=o.length,m=new Array(l);for(s=0;s<l;++s)(u=n[s])&&(m[s]=c=a.call(u,u.__data__,s,n)+"",h.has(c)?i[s]=u:h.set(c,u));for(s=0;s<f;++s)c=a.call(t,o[s],s,o)+"",(u=h.get(c))?(r[s]=u,u.__data__=o[s],h.delete(c)):e[s]=new _(t,o[s]);for(s=0;s<l;++s)(u=n[s])&&h.get(m[s])===u&&(i[s]=u)}function M(t){return t.__data__}function k(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}_.prototype={constructor:_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var A="http://www.w3.org/1999/xhtml";const T={svg:"http://www.w3.org/2000/svg",xhtml:A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function S(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),T.hasOwnProperty(n)?{space:T[n],local:t}:t}function j(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E(t,n){return function(){this.setAttribute(t,n)}}function P(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function q(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function z(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function V(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function L(t){return function(){this.style.removeProperty(t)}}function O(t,n,e){return function(){this.style.setProperty(t,n,e)}}function R(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function C(t,n){return t.style.getPropertyValue(n)||V(t).getComputedStyle(t,null).getPropertyValue(n)}function I(t){return function(){delete this[t]}}function F(t,n){return function(){this[t]=n}}function X(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function D(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new $(t)}function $(t){this._node=t,this._names=D(t.getAttribute("class")||"")}function U(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Y(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function H(t){return function(){U(this,t)}}function Q(t){return function(){Y(this,t)}}function Z(t,n){return function(){(n.apply(this,arguments)?U:Y)(this,t)}}function G(){this.textContent=""}function K(t){return function(){this.textContent=t}}function W(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function J(){this.innerHTML=""}function tt(t){return function(){this.innerHTML=t}}function nt(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function et(){this.nextSibling&&this.parentNode.appendChild(this)}function rt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function it(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===A&&n.documentElement.namespaceURI===A?n.createElement(t):n.createElementNS(e,t)}}function ot(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function at(t){var n=S(t);return(n.local?ot:it)(n)}function st(){return null}function ut(){var t=this.parentNode;t&&t.removeChild(this)}function ct(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ht(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function lt(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function ft(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function mt(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function pt(t,n,e){var r=V(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function dt(t,n){return function(){return pt(this,t,n)}}function gt(t,n){return function(){return pt(this,t,n.apply(this,arguments))}}$.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var vt=[null];function yt(t,n){this._groups=t,this._parents=n}function _t(){return new yt([[document.documentElement]],vt)}yt.prototype=_t.prototype={constructor:yt,select:function(t){"function"!=typeof t&&(t=u(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,s=n[i],c=s.length,h=r[i]=new Array(c),l=0;l<c;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),h[l]=a);return new yt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);return null==n?[]:c(n)}}(t):l(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,s=n[o],u=s.length,h=0;h<u;++h)(a=s[h])&&(r.push(t.call(a,a.__data__,h,s)),i.push(a));return new yt(r,i)},selectChild:function(t){return this.select(null==t?d:function(t){return function(){return p.call(this.children,t)}}("function"==typeof t?t:m(t)))},selectChildren:function(t){return this.selectAll(null==t?v:function(t){return function(){return g.call(this.children,t)}}("function"==typeof t?t:m(t)))},filter:function(t){"function"!=typeof t&&(t=f(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new yt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,M);var e=n?b:w,r=this._parents,i=this._groups;"function"!=typeof t&&(t=x(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),h=0;h<o;++h){var l=r[h],f=i[h],m=f.length,p=c(t.call(l,l&&l.__data__,h,r)),d=p.length,g=s[h]=new Array(d),v=a[h]=new Array(d),y=u[h]=new Array(m);e(l,f,g,v,y,p,n);for(var _,k,A=0,T=0;A<d;++A)if(_=g[A]){for(A>=T&&(T=A+1);!(k=v[T])&&++T<d;);_._next=k||null}}return(a=new yt(a,r))._enter=s,a._exit=u,a},enter:function(){return new yt(this._enter||this._groups.map(y),this._parents)},exit:function(){return new yt(this._exit||this._groups.map(y),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof yt))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=n[s],h=e[s],l=c.length,f=a[s]=new Array(l),m=0;m<l;++m)(u=c[m]||h[m])&&(f[m]=u);for(;s<r;++s)a[s]=n[s];return new yt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=k);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],u=s.length,c=i[o]=new Array(u),h=0;h<u;++h)(a=s[h])&&(c[h]=a);c.sort(n)}return new yt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=S(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?N:j:"function"==typeof n?e.local?z:q:e.local?P:E)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?L:"function"==typeof n?R:O)(t,n,null==e?"":e)):C(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?I:"function"==typeof n?X:F)(t,n)):this.node()[t]},classed:function(t,n){var e=D(t+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?Z:n?H:Q)(e,n))},text:function(t){return arguments.length?this.each(null==t?G:("function"==typeof t?W:K)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?nt:tt)(t)):this.node().innerHTML},raise:function(){return this.each(et)},lower:function(){return this.each(rt)},append:function(t){var n="function"==typeof t?t:at(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:at(t),r=null==n?st:"function"==typeof n?n:u(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ut)},clone:function(t){return this.select(t?ht:ct)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=lt(t+""),a=o.length;if(!(arguments.length<2)){for(s=n?mt:ft,r=0;r<a;++r)this.each(s(o[r],n,e));return this}var s=this.node().__on;if(s)for(var u,c=0,h=s.length;c<h;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,n){return this.each(("function"==typeof n?gt:dt)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const xt=_t;function wt(t){return"string"==typeof t?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],vt)}function bt(t){t.stopImmediatePropagation()}function Mt(t){t.preventDefault(),t.stopImmediatePropagation()}function kt(t){var n=t.document.documentElement,e=wt(t).on("dragstart.drag",Mt,!0);"onselectstart"in n?e.on("selectstart.drag",Mt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function At(t,n){var e=t.document.documentElement,r=wt(t).on("dragstart.drag",null);n&&(r.on("click.drag",Mt,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function Tt(t){return((t=Math.exp(t))+1/t)/2}const St=function t(n,e,r){function i(t,i){var o,a,s=t[0],u=t[1],c=t[2],h=i[0],l=i[1],f=i[2],m=h-s,p=l-u,d=m*m+p*p;if(d<1e-12)a=Math.log(f/c)/n,o=function(t){return[s+t*m,u+t*p,c*Math.exp(n*t*a)]};else{var g=Math.sqrt(d),v=(f*f-c*c+r*d)/(2*c*e*g),y=(f*f-c*c-r*d)/(2*f*e*g),_=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);a=(x-_)/n,o=function(t){var r,i=t*a,o=Tt(_),h=c/(e*g)*(o*(r=n*i+_,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[s+h*m,u+h*p,c*o/Tt(n*i+_)]}}return o.duration=1e3*a*n/Math.SQRT2,o}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function jt(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}var Nt,Et,Pt=0,qt=0,zt=0,Vt=0,Lt=0,Ot=0,Rt="object"==typeof performance&&performance.now?performance:Date,Ct="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function It(){return Lt||(Ct(Ft),Lt=Rt.now()+Ot)}function Ft(){Lt=0}function Xt(){this._call=this._time=this._next=null}function Dt(t,n,e){var r=new Xt;return r.restart(t,n,e),r}function Bt(){Lt=(Vt=Rt.now())+Ot,Pt=qt=0;try{!function(){It(),++Pt;for(var t,n=Nt;n;)(t=Lt-n._time)>=0&&n._call.call(null,t),n=n._next;--Pt}()}finally{Pt=0,function(){for(var t,n,e=Nt,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nt=n);Et=t,Ut(r)}(),Lt=0}}function $t(){var t=Rt.now(),n=t-Vt;n>1e3&&(Ot-=n,Vt=t)}function Ut(t){Pt||(qt&&(qt=clearTimeout(qt)),t-Lt>24?(t<1/0&&(qt=setTimeout(Bt,t-Rt.now()-Ot)),zt&&(zt=clearInterval(zt))):(zt||(Vt=Rt.now(),zt=setInterval($t,1e3)),Pt=1,Ct(Bt)))}function Yt(t,n,e){var r=new Xt;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Xt.prototype=Dt.prototype={constructor:Xt,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?It():+e)+(null==n?0:+n),this._next||Et===this||(Et?Et._next=this:Nt=this,Et=this),this._call=t,this._time=e,Ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ut())}};var Ht=a("start","end","cancel","interrupt"),Qt=[];function Zt(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(u){var c,h,l,f;if(1!==e.state)return s();for(c in i)if((f=i[c]).name===e.name){if(3===f.state)return Yt(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Yt((function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(u))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(l=e.tween.length),c=0,h=-1;c<l;++c)(f=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++h]=f);r.length=h+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),s())}function s(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Dt((function(t){e.state=1,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:i,on:Ht,tween:Qt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Gt(t,n){var e=Wt(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Kt(t,n){var e=Wt(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Wt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Jt(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function tn(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var nn,en=180/Math.PI,rn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function on(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*en,skewX:Math.atan(u)*en,scaleX:a,scaleY:s}}function an(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,n,null,e);s.push({i:u-4,x:tn(t,i)},{i:u-2,x:tn(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:tn(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,s,u),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:tn(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,s,u),function(t,n,e,r,o,a){if(t!==e||n!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:tn(t,e)},{i:s-2,x:tn(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var n,e=-1,r=u.length;++e<r;)s[(n=u[e]).i]=n.x(t);return s.join("")}}}var sn=an((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?rn:on(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),un=an((function(t){return null==t?rn:(nn||(nn=document.createElementNS("http://www.w3.org/2000/svg","g")),nn.setAttribute("transform",t),(t=nn.transform.baseVal.consolidate())?on((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):rn)}),", ",")",")");function cn(t,n){var e,r;return function(){var i=Kt(this,t),o=i.tween;if(o!==e)for(var a=0,s=(r=e=o).length;a<s;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function hn(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Kt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},u=0,c=i.length;u<c;++u)if(i[u].name===n){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function ln(t,n,e){var r=t._id;return t.each((function(){var t=Kt(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Wt(t,r).value[n]}}function fn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function mn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function pn(){}var dn=.7,gn=1/dn,vn="\\s*([+-]?\\d+)\\s*",yn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xn=/^#([0-9a-f]{3,8})$/,wn=new RegExp("^rgb\\("+[vn,vn,vn]+"\\)$"),bn=new RegExp("^rgb\\("+[_n,_n,_n]+"\\)$"),Mn=new RegExp("^rgba\\("+[vn,vn,vn,yn]+"\\)$"),kn=new RegExp("^rgba\\("+[_n,_n,_n,yn]+"\\)$"),An=new RegExp("^hsl\\("+[yn,_n,_n]+"\\)$"),Tn=new RegExp("^hsla\\("+[yn,_n,_n,yn]+"\\)$"),Sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jn(){return this.rgb().formatHex()}function Nn(){return this.rgb().formatRgb()}function En(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=xn.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Pn(n):3===e?new Ln(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?qn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?qn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=wn.exec(t))?new Ln(n[1],n[2],n[3],1):(n=bn.exec(t))?new Ln(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Mn.exec(t))?qn(n[1],n[2],n[3],n[4]):(n=kn.exec(t))?qn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=An.exec(t))?In(n[1],n[2]/100,n[3]/100,1):(n=Tn.exec(t))?In(n[1],n[2]/100,n[3]/100,n[4]):Sn.hasOwnProperty(t)?Pn(Sn[t]):"transparent"===t?new Ln(NaN,NaN,NaN,0):null}function Pn(t){return new Ln(t>>16&255,t>>8&255,255&t,1)}function qn(t,n,e,r){return r<=0&&(t=n=e=NaN),new Ln(t,n,e,r)}function zn(t){return t instanceof pn||(t=En(t)),t?new Ln((t=t.rgb()).r,t.g,t.b,t.opacity):new Ln}function Vn(t,n,e,r){return 1===arguments.length?zn(t):new Ln(t,n,e,null==r?1:r)}function Ln(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function On(){return"#"+Cn(this.r)+Cn(this.g)+Cn(this.b)}function Rn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Cn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function In(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Xn(t,n,e,r)}function Fn(t){if(t instanceof Xn)return new Xn(t.h,t.s,t.l,t.opacity);if(t instanceof pn||(t=En(t)),!t)return new Xn;if(t instanceof Xn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=n===o?(e-r)/s+6*(e<r):e===o?(r-n)/s+2:(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Xn(a,s,u,t.opacity)}function Xn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Dn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Bn(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}fn(pn,En,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:jn,formatHex:jn,formatHsl:function(){return Fn(this).formatHsl()},formatRgb:Nn,toString:Nn}),fn(Ln,Vn,mn(pn,{brighter:function(t){return t=null==t?gn:Math.pow(gn,t),new Ln(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?dn:Math.pow(dn,t),new Ln(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:On,formatHex:On,formatRgb:Rn,toString:Rn})),fn(Xn,(function(t,n,e,r){return 1===arguments.length?Fn(t):new Xn(t,n,e,null==r?1:r)}),mn(pn,{brighter:function(t){return t=null==t?gn:Math.pow(gn,t),new Xn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?dn:Math.pow(dn,t),new Xn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Ln(Dn(t>=240?t-240:t+120,i,r),Dn(t,i,r),Dn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const $n=t=>()=>t;function Un(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):$n(isNaN(t)?n:t)}const Yn=function t(n){var e=function(t){return 1==(t=+t)?Un:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):$n(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=Vn(t)).r,(n=Vn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=Un(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Hn(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),s=new Array(i);for(e=0;e<i;++e)r=Vn(n[e]),o[e]=r.r||0,a[e]=r.g||0,s[e]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}Hn((function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<n-1?t[r+2]:2*o-i;return Bn((e-r/n)*n,a,i,o,s)}})),Hn((function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],s=t[(r+2)%n];return Bn((e-r/n)*n,i,o,a,s)}}));var Qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zn=new RegExp(Qn.source,"g");function Gn(t,n){var e,r,i,o=Qn.lastIndex=Zn.lastIndex=0,a=-1,s=[],u=[];for(t+="",n+="";(e=Qn.exec(t))&&(r=Zn.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:tn(e,r)})),o=Zn.lastIndex;return o<n.length&&(i=n.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(n){return t(n)+""}}(u[0].x):function(t){return function(){return t}}(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})}function Kn(t,n){var e;return("number"==typeof n?tn:n instanceof En?Yn:(e=En(n))?(n=e,Yn):Gn)(t,n)}function Wn(t){return function(){this.removeAttribute(t)}}function Jn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function te(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function ne(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function ee(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttribute(t)}}function re(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttributeNS(t.space,t.local)}}function ie(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function oe(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function ae(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&oe(t,i)),e}return i._value=n,i}function se(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&ie(t,i)),e}return i._value=n,i}function ue(t,n){return function(){Gt(this,t).delay=+n.apply(this,arguments)}}function ce(t,n){return n=+n,function(){Gt(this,t).delay=n}}function he(t,n){return function(){Kt(this,t).duration=+n.apply(this,arguments)}}function le(t,n){return n=+n,function(){Kt(this,t).duration=n}}function fe(t,n){if("function"!=typeof n)throw new Error;return function(){Kt(this,t).ease=n}}function me(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?Gt:Kt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}var pe=xt.prototype.constructor;function de(t){return function(){this.style.removeProperty(t)}}function ge(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function ve(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&ge(t,o,e)),r}return o._value=n,o}function ye(t){return function(n){this.textContent=t.call(this,n)}}function _e(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&ye(r)),n}return r._value=t,r}var xe=0;function we(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function be(){return++xe}var Me=xt.prototype;we.prototype=function(t){return xt().transition(t)}.prototype={constructor:we,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=u(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,h=r[a],l=h.length,f=o[a]=new Array(l),m=0;m<l;++m)(s=h[m])&&(c=t.call(s,s.__data__,m,h))&&("__data__"in s&&(c.__data__=s.__data__),f[m]=c,Zt(f[m],n,e,m,f,Wt(s,e)));return new we(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=l(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],h=c.length,f=0;f<h;++f)if(u=c[f]){for(var m,p=t.call(u,u.__data__,f,c),d=Wt(u,e),g=0,v=p.length;g<v;++g)(m=p[g])&&Zt(m,n,e,g,p,d);o.push(p),a.push(u)}return new we(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=f(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new we(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=n[s],h=e[s],l=c.length,f=a[s]=new Array(l),m=0;m<l;++m)(u=c[m]||h[m])&&(f[m]=u);for(;s<r;++s)a[s]=n[s];return new we(a,this._parents,this._name,this._id)},selection:function(){return new pe(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=be(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var h=Wt(a,n);Zt(a,t,e,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new we(r,this._parents,t,e)},call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:function(t,n){var e=this._id;return arguments.length<2?Wt(this.node(),e).on.on(t):this.each(me(e,t,n))},attr:function(t,n){var e=S(t),r="transform"===e?un:Kn;return this.attrTween(t,"function"==typeof n?(e.local?re:ee)(e,r,ln(this,"attr."+t,n)):null==n?(e.local?Jn:Wn)(e):(e.local?ne:te)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=S(t);return this.tween(e,(r.local?ae:se)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?sn:Kn;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=C(this,t),a=(this.style.removeProperty(t),C(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,de(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=C(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=C(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s))}}(t,r,ln(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,s="end."+a;return function(){var u=Kt(this,t),c=u.on,h=null==u.value[a]?o||(o=de(n)):void 0;c===e&&i===h||(r=(e=c).copy()).on(s,i=h),u.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=C(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,ve(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ln(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,_e(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Wt(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?cn:hn)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ue:ce)(n,t)):Wt(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?he:le)(n,t)):Wt(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(fe(n,t)):Wt(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Kt(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};e.each((function(){var e=Kt(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:Me[Symbol.iterator]};var ke={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ae(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}xt.prototype.interrupt=function(t){return this.each((function(){Jt(this,t)}))},xt.prototype.transition=function(t){var n,e;t instanceof we?(n=t._id,t=t._name):(n=be(),(e=ke).time=It(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Zt(a,t,n,c,s,e||Ae(a,n));return new we(r,this._parents,t,n)};const Te=t=>()=>t;function Se(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function je(t,n,e){this.k=t,this.x=n,this.y=e}je.prototype={constructor:je,scale:function(t){return 1===t?this:new je(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new je(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ne=new je(1,0,0);function Ee(t){t.stopImmediatePropagation()}function Pe(t){t.preventDefault(),t.stopImmediatePropagation()}function qe(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function ze(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ve(){return this.__zoom||Ne}function Le(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Oe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Re(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}je.prototype;const Ce=Math.PI,Ie=2*Ce,Fe=1e-6,Xe=Ie-Fe;function De(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Be(){return new De}De.prototype=Be.prototype={constructor:De,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,s=e-t,u=r-n,c=o-t,h=a-n,l=c*c+h*h;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>Fe)if(Math.abs(h*s-u*c)>Fe&&i){var f=e-o,m=r-a,p=s*s+u*u,d=f*f+m*m,g=Math.sqrt(p),v=Math.sqrt(l),y=i*Math.tan((Ce-Math.acos((p+l-d)/(2*g*v)))/2),_=y/v,x=y/g;Math.abs(_-1)>Fe&&(this._+="L"+(t+_*c)+","+(n+_*h)),this._+="A"+i+","+i+",0,0,"+ +(h*f>c*m)+","+(this._x1=t+x*s)+","+(this._y1=n+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,r,i,o){t=+t,n=+n,o=!!o;var a=(e=+e)*Math.cos(r),s=e*Math.sin(r),u=t+a,c=n+s,h=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Fe||Math.abs(this._y1-c)>Fe)&&(this._+="L"+u+","+c),e&&(l<0&&(l=l%Ie+Ie),l>Xe?this._+="A"+e+","+e+",0,1,"+h+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+h+","+(this._x1=u)+","+(this._y1=c):l>Fe&&(this._+="A"+e+","+e+",0,"+ +(l>=Ce)+","+h+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};const $e=Be;function Ue(t){return function(){return t}}function Ye(t){this._context=t}function He(t){return new Ye(t)}function Qe(t){return t[0]}function Ze(t){return t[1]}function Ge(t,n){var e=Ue(!0),r=null,i=He,o=null;function a(a){var s,u,c,h=(a=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(a)).length,l=!1;for(null==r&&(o=i(c=$e())),s=0;s<=h;++s)!(s<h&&e(u=a[s],s,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(u,s,a),+n(u,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?Qe:Ue(t),n="function"==typeof n?n:void 0===n?Ze:Ue(n),a.x=function(n){return arguments.length?(t="function"==typeof n?n:Ue(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Ue(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Ue(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}Array.prototype.slice,Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};const Ke=function(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function We(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}const Je=Symbol("implicit");function tr(){var t=new Map,n=[],e=[],r=Je;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==Je)return r;t.set(o,a=n.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of e){const e=r+"";t.has(e)||t.set(e,n.push(r))}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return tr(n,e).unknown(r)},We.apply(i,arguments),i}const nr=t=>()=>t;function er(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function rr(t){return!t.ctrlKey&&!t.button}function ir(){return this.parentNode}function or(t,n){return null==n?{x:t.x,y:t.y}:n}function ar(){return navigator.maxTouchPoints||"ontouchstart"in this}function sr(t,n){var e=0;if(t.length!==n.length)throw"Error: tow arrays do not have the same length";for(var r=0;r<t.length;r++)e+=Math.pow(t[r]-n[r],2);return Math.sqrt(e)}function ur(t,n){if(t.length===n.length){var e=cr(t),r=cr(n);return function(t,n,e,r){for(var i=0,o=0;o<t.length;o++)i+=(t[o]-e)*(n[o]-r);return i}(t,n,e,r)/function(t,n,e,r){for(var i=0,o=0,a=0;a<t.length;a++)i+=(t[a]-e)*(t[a]-e);for(var s=0;s<n.length;s++)o+=(n[s]-r)*(n[s]-r);return Math.sqrt(i*o)}(t,n,e,r)}throw"Errors in similarity calculation"}function cr(t){return hr(t)/t.length}function hr(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function lr(t,n){var e=[];if(n>=t[0].length||n<0)alert("wrong column number:"+n);else for(var r=0;r<t.length;r++)e.push(t[r][n]);return e}function fr(t,n){var e=[];if(n>=t[0].length||n<0)alert("wrong column number:"+n);else for(var r=1;r<t.length;r++)e.push(Number(t[r][n]));return e}function mr(t,n="0"){for(var e=new Array(t[0].length-1),r=0;r<t[0].length-1;r++){e[r]=new Array(t[0].length-1);for(var i=0;i<r;i++)e[r][i]=Math.abs(ur(fr(t,r+1),fr(t,i+1))),e[i][r]=Math.abs(ur(fr(t,r+1),fr(t,i+1)))}for(pr(e)[2],r=0;r<t[0].length-1;r++)for(i=r;i<e.length;i++)e[r][i]="12"!==n?-1:2;return console.log(e),e}function pr(t){for(var n=t[1][0],e=1,r=0,i=0;i<t.length;i++)for(var o=0;o<i;o++)t[i][o]>n&&(n=t[i][o],e=i,r=o);return[e,r,n]}function dr(t){for(var n=t[1][0],e=1,r=0,i=0;i<t.length;i++)for(var o=0;o<i;o++)t[i][o]<n&&(n=t[i][o],e=i,r=o);return[e,r,n]}function gr(t){for(var n=t[0],e=0,r=0;r<t.length;r++)t[r]>n&&(e=r,n=t[r]);return[e,n]}function vr(t){for(var n=t[0],e=0,r=0;r<t.length;r++)t[r]<n&&(e=r,n=t[r]);return[e,n]}function yr(t){for(var n=[],e=0,r=t.length;e<r;e++)t[e]instanceof Array?n[e]=yr(t[e]):n[e]=t[e];return n}function _r(t){for(var n=yr(t),e=0;e<t.length;e++)n[e].splice(0,1);n.splice(0,1);for(var r=0;r<n.length;r++)for(var i=0;i<n[0].length;i++)n[r][i]=Number(n[r][i]);return n}function xr(t){var n=[];return function t(e,r){r=r||[];for(var i,o=0;o<e.length;o++)i=e.splice(o,1),0===e.length&&n.push(r.concat(i)),t(e.slice(),r.concat(i)),e.splice(o,0,i[0]);return n}(t)}function wr(t,n){var e,r,i,o,a;if(n>t.length||n<=0)return[];if(n==t.length)return[t];if(1==n){for(i=[],e=0;e<t.length;e++)i.push([t[e]]);return i}for(i=[],e=0;e<t.length-n+1;e++)for(o=t.slice(e,e+1),a=wr(t.slice(e+1),n-1),r=0;r<a.length;r++)i.push(o.concat(a[r]));return i}function br(t,n,e,r,i){if(n>=t.length)throw"Error: Wrong index";for(var o=!0,a=[t[n][r],t[n][i]],s=0;s<t.length;s++){var u=[t[s][r],t[s][i]];s!==n&&sr(a,u)<e&&(o=!1)}return o}function Mr(t,n){for(var e=0,r=0;r<n.length-1;r++)e+=kr(t,n[r],n[r+1]);return e}function kr(t,n,e){for(var r=t[0],i=0,o=0;o<r.length;o++)(r[o][0]===n&&r[o][1]===e||r[o][0]===e&&r[o][1]===n)&&(i=t[1][o]);return i}function Ar(t,n){pr(t)[2];var e,r,i,o,a=-1,s=n[0],u=n[n.length-1];if(gr(t[s])[1]>gr(lr(t,s))[1]?(e=gr(t[s])[0],r=t[s][e]):r=t[e=gr(lr(t,s))[0]][s],gr(t[u])[1]>gr(lr(t,u))[1]?(i=gr(t[u])[0],o=t[u][i]):o=t[i=gr(lr(t,u))[0]][u],r>o){n.unshift(e);for(var c=0;c<t.length;c++)t[s][c]=a;for(var h=0;h<t.length;h++)t[h][s]=a;t[e][u]=a,t[u][e]=a}else{for(n.push(i),c=0;c<t.length;c++)t[u][c]=a;for(h=0;h<t.length;h++)t[h][u]=a;t[s][i]=a,t[i][s]=a}return n}er.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Tr=__webpack_require__(951);function Sr(t){var n=Tr.u.svd(t);console.log("svd",t);for(var e=lr(n,0),r=hr(e),i=new Array(e.length),o=0;o<e.length;o++)i[o]=e[o]/r;return console.log(i),i}function jr(t,n){var e;if("undefined"==(e=t<n?"a":t>n?"c":"b"))throw"Errors in slope classification";return e}function Nr(t,n){for(var e=0,r=1;r<t.length;r++)t[r]===n&&e++;return e}function Er(t,n){for(var e=0,r=0;r<n.length-1;r++)e+=Pr(t,n[r],n[r+1]);if(0===e)throw"Error in score calculation";return e}function Pr(t,n,e){for(var r=t[0],i=0,o=0;o<r.length;o++)if(r[o][0]===n&&r[o][1]===e||r[o][0]===e&&r[o][1]===n)for(var a=lr(t,o),s=1;s<a.length;s++)a[s]>i&&(i=a[s]);if(0===i)throw"Error in frequency calculation.";return i}function qr(t,n){for(var e=0,r=0;r<t.length-1;r++)e+=zr(t[r],t[r+1],n);return e}function zr(t,n,e){var r,i;if(t>n)r=t,i=n;else{if(!(t<n))throw"Error: two identical dimensions."+t+n;r=n,i=t}return e[r][i]}function Vr(t,n){for(var e=[],r=0;r<t.length-1;r++)e.push(zr(t[r],t[r+1],n));return function(t){for(var n=0,e=0,r=0;r<t.length;r++)""===t[r]||(n+=1,e+=parseFloat(t[r]));var i=0;if(n>1){var o=e/n;for(r=0;r<t.length;r++)""===t[r]||(i+=(t[r]-o)*(t[r]-o));return i/n}return 0}(e)}function Lr(t,n){var e,r,i,o,a=n[0],s=n[n.length-1];if(vr(t[a])[1]<vr(lr(t,a))[1]?(e=vr(t[a])[0],r=t[a][e]):r=t[e=vr(lr(t,a))[0]][a],vr(t[s])[1]<vr(lr(t,s))[1]?(i=vr(t[s])[0],o=t[s][i]):o=t[i=vr(lr(t,s))[0]][s],r<o){n.unshift(e);for(var u=0;u<t.length;u++)t[a][u]=2;for(var c=0;c<t.length;c++)t[c][a]=2;t[e][s]=2,t[s][e]=2}else{for(n.push(i),u=0;u<t.length;u++)t[s][u]=2;for(c=0;c<t.length;c++)t[c][s]=2;t[a][i]=2,t[i][a]=2}return n}class Or{constructor({data:t,width:n,height:e,selector:r,type:i,dimensions:o,target:a,dynamic:s,ordering:u="0"}){this.data=t,this.width=n,this.height=e,this.selector=r,this.type=i,this.dimensions=o,this.target=a,this.dynamic=s,console.log(this.dimensions);let c=this.data.map(((t,n)=>[n].concat(this.dimensions.map((n=>t[n])))));c.unshift(["id"].concat(this.dimensions));for(var h=[[]],l=[],f=0;f<c.length;f++){var m=c[f];h[f]=m;for(var p=m.join(",").split(","),d=0;d<p.length;d++)h[f][d]=p[d]}for(var g=1;g<h.length;g++)for(var v=0;v<h[0].length;v++)if(""===h[g][v]){l.push(g);break}for(var y=0,_=0;_<l.length;_++)h.splice(l[_]-y,1),y++;var x=function(t){for(var n=_r(t),e=yr(t),r=0;r<n[0].length;r++)for(var i=lr(n,r),o=gr(i)[1],a=vr(i)[1],s=o-a,u=0;u<i.length;u++)e[u+1][r+1]=(i[u]-a)/s;return e}(h);switch(u){case"0":break;case"1":this.dimensions=function(t){for(var n=function(t,n){for(var e=[],r=[],i=0;i<t[0].length;i++)r.push(i);var o=wr(r,2);e.push(o),e.push([]);for(var a=0;a<o.length;a++){for(var s=0,u=0;u<t.length;u++)br(t,u,.1,o[a][0],o[a][1])&&s++;e[1].push(s)}return e}(_r(t)),e=[],r=0;r<t[0].length-1;r++)e.push(r);for(var i=xr(e),o=[],a=0;a<i.length;a++)o.push(Mr(n,i[a]));return i[vr(o)[0]]}(x).map((t=>this.dimensions[t]));break;case"2":this.dimensions=function(t){for(var n=yr(Sr(_r(t))),e=new Array(n.length),r=.5*vr(n)[1],i=0;i<n.length;i++){var o=gr(n)[0];e[i]=o,n[o]=r}return console.log("nc",e),e}(h).map((t=>this.dimensions[t]));break;case"3":var w=yr(mr(x));this.dimensions=function(t){for(var n=function(t){var n,e,r=[],i=(pr(t)[2],dr(t)[2]-1);return n=pr(t)[0],e=pr(t)[1],t[n][e]=i,r.push(n),r.push(e),r}(t);n.length!==t.length;)n=Ar(t,n);return n}(w).map((t=>this.dimensions[t]));break;case"4":this.dimensions=function(t){for(var n=Sr(_r(t)),e=new Array(n.length),r=new Array(t[0].length-1),i=0;i<t[0].length-1;i++){r[i]=new Array(t[0].length-1);for(var o=0;o<i;o++)r[i][o]=Math.abs(ur(fr(t,i+1),fr(t,o+1))),r[o][i]=Math.abs(ur(fr(t,i+1),fr(t,o+1)))}console.log(r);for(var a=dr(r)[2]-1,s=0;s<n.length;s++)r[s][s]=a;var u=yr(r),c=gr(n)[0];e[0]=c;for(var h=0;h<r.length;h++)u[h][c]=a;for(var l=1;l<e.length;l++){e[l]=gr(u[c])[0],u[c][e[l]]=a,u[e[l]][c]=a,c=e[l];for(var f=0;f<u.length;f++)u[f][c]=a}return e}(h).map((t=>this.dimensions[t]));break;case"5":this.dimensions=function(t){for(var n=[],e=0;e<t[0].length-1;e++)n.push(e);var r=wr(n,2),i=[];i.push(r);for(var o=1;o<t.length;o++){i.push([]);for(var a=0;a<r.length;a++)i[o].push(jr(t[o][r[a][0]+1],t[o][r[a][1]+1]))}var s=[];s.push(r);for(var u=["a","b","c"],c=1;c<4;c++){s.push([]);for(var h=0;h<r.length;h++)s[c].push(Nr(lr(i,h),u[c-1]))}return console.log(s),function(t,n){for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=Er(t,n[r]);return console.log(vr(e)[1]),n[vr(e)[0]]}(s,xr(n))}(x).map((t=>this.dimensions[t]));break;case"6":var b=yr(mr(h));this.dimensions=function(t,n){for(var e=[],r=[],i=0;i<t[0].length-1;i++)e.push(i);for(var o=xr(e),a=0;a<o.length;a++){var s=qr(o[a],n);r.push(s)}return o[gr(r)[0]]}(h,b).map((t=>this.dimensions[t]));break;case"7":var M=yr(mr(h));this.dimensions=function(t,n){for(var e=[],r=[],i=0;i<t[0].length-1;i++)e.push(i);for(var o=xr(e),a=0;a<o.length;a++){var s=qr(o[a],n);r.push(s)}return o[vr(r)[0]]}(h,M).map((t=>this.dimensions[t]));break;case"8":var k=yr(mr(h));this.dimensions=function(t,n){for(var e=[],r=[],i=0;i<t[0].length-1;i++)e.push(i);for(var o=xr(e),a=0;a<o.length;a++){var s=Vr(o[a],n);r.push(s)}return o[gr(r)[0]]}(h,k).map((t=>this.dimensions[t]));break;case"9":var A=yr(mr(h));this.dimensions=function(t,n){for(var e=[],r=[],i=0;i<t[0].length-1;i++)e.push(i);for(var o=xr(e),a=0;a<o.length;a++){var s=Vr(o[a],n);r.push(s)}return o[vr(r)[0]]}(h,A).map((t=>this.dimensions[t]));break;case"10":var T=yr(mr(h,"12"));this.dimensions=function(t){for(var n=function(t){var n,e,r=[],i=pr(t)[2]+1;return n=dr(t)[0],e=dr(t)[1],t[n][e]=i,r.push(n),r.push(e),r}(t);n.length!==t.length;)n=Lr(t,n);return n}(T).map((t=>this.dimensions[t]));break;default:alert("Sorry, something is wrong.")}if(console.log("dim after reordering",this.dimensions),this.dimensions.length%2!=0&&["cpc","spc","apc","epc","prc","pwc"].includes(this.type)){let t=this.dimensions.slice(-1);this.data.map((n=>n[`${t}_2`]=n[t])),this.dimensions=this.dimensions.concat(t)}this.axis=null,this.items=null,this.filtered_items=null,this.dualview=null,this.initElements(),null!==this.target&&this.createLegend()}draw(){}initElements(){this.width=this.width-10-10,this.height=this.height-30-10,this.svg=wt(this.selector).append("svg").attr("width",this.width+10+10).attr("height",this.height+30+10).call(function(){var t,n,e,r=qe,i=ze,o=Re,s=Le,u=Oe,c=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],l=250,f=St,m=a("start","zoom","end"),p=500,d=0,g=10;function v(t){t.property("__zoom",Ve).on("wheel.zoom",k).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(u).on("touchstart.zoom",S).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new je(n,t.x,t.y)}function _(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new je(t.k,r,i)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,n,e,r){t.on("start.zoom",(function(){b(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=b(t,o).event(r),s=i.apply(t,o),u=null==e?x(s):"function"==typeof e?e.apply(t,o):e,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),h=t.__zoom,l="function"==typeof n?n.apply(t,o):n,m=f(h.invert(u).concat(c/h.k),l.invert(u).concat(c/l.k));return function(t){if(1===t)t=l;else{var n=m(t),e=c/n[2];t=new je(e,u[0]-n[0]*e,u[1]-n[1]*e)}a.zoom(null,t)}}))}function b(t,n,e){return!e&&t.__zooming||new M(t,n)}function M(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,n),this.taps=0}function k(t,...n){if(r.apply(this,arguments)){var e=b(this,n).event(t),i=this.__zoom,a=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,s.apply(this,arguments)))),u=jt(t);if(e.wheel)e.mouse[0][0]===u[0]&&e.mouse[0][1]===u[1]||(e.mouse[1]=i.invert(e.mouse[0]=u)),clearTimeout(e.wheel);else{if(i.k===a)return;e.mouse=[u,i.invert(u)],Jt(this),e.start()}Pe(t),e.wheel=setTimeout(l,150),e.zoom("mouse",o(_(y(i,a),e.mouse[0],e.mouse[1]),e.extent,h))}function l(){e.wheel=null,e.end()}}function A(t,...n){if(!e&&r.apply(this,arguments)){var i=b(this,n,!0).event(t),a=wt(t.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",m,!0),s=jt(t,u),u=t.currentTarget,c=t.clientX,l=t.clientY;kt(t.view),Ee(t),i.mouse=[s,this.__zoom.invert(s)],Jt(this),i.start()}function f(t){if(Pe(t),!i.moved){var n=t.clientX-c,e=t.clientY-l;i.moved=n*n+e*e>d}i.event(t).zoom("mouse",o(_(i.that.__zoom,i.mouse[0]=jt(t,u),i.mouse[1]),i.extent,h))}function m(t){a.on("mousemove.zoom mouseup.zoom",null),At(t.view,i.moved),Pe(t),i.event(t).end()}}function T(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=jt(t.changedTouches?t.changedTouches[0]:t,this),s=e.invert(a),u=e.k*(t.shiftKey?.5:2),c=o(_(y(e,u),a,s),i.apply(this,n),h);Pe(t),l>0?wt(this).transition().duration(l).call(w,c,a,t):wt(this).call(v.transform,c,a,t)}}function S(e,...i){if(r.apply(this,arguments)){var o,a,s,u,c=e.touches,h=c.length,l=b(this,i,e.changedTouches.length===h).event(e);for(Ee(e),a=0;a<h;++a)u=[u=jt(s=c[a],this),this.__zoom.invert(u),s.identifier],l.touch0?l.touch1||l.touch0[2]===u[2]||(l.touch1=u,l.taps=0):(l.touch0=u,o=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(l.taps<2&&(n=u[0],t=setTimeout((function(){t=null}),p)),Jt(this),l.start())}}function j(t,...n){if(this.__zooming){var e,r,i,a,s=b(this,n).event(t),u=t.changedTouches,c=u.length;for(Pe(t),e=0;e<c;++e)i=jt(r=u[e],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var l=s.touch0[0],f=s.touch0[1],m=s.touch1[0],p=s.touch1[1],d=(d=m[0]-l[0])*d+(d=m[1]-l[1])*d,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;r=y(r,Math.sqrt(d/g)),i=[(l[0]+m[0])/2,(l[1]+m[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(_(r,i,a),s.extent,h))}}function N(t,...r){if(this.__zooming){var i,o,a=b(this,r).event(t),s=t.changedTouches,u=s.length;for(Ee(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),p),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=jt(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<g)){var c=wt(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return v.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",Ve),t!==i?w(t,n,e,r):i.interrupt().each((function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},v.scaleBy=function(t,n,e,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},v.scaleTo=function(t,n,e,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==e?x(t):"function"==typeof e?e.apply(this,arguments):e,s=r.invert(a),u="function"==typeof n?n.apply(this,arguments):n;return o(_(y(r,u),a,s),t,h)}),e,r)},v.translateBy=function(t,n,e,r){v.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),h)}),null,r)},v.translateTo=function(t,n,e,r,a){v.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?x(t):"function"==typeof r?r.apply(this,arguments):r;return o(Ne.translate(s[0],s[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,h)}),r,a)},M.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=wt(this.that).datum();m.call(t,this.that,new Se(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:m}),n)}},v.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:Te(+t),v):s},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:Te(!!t),v):r},v.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Te(!!t),v):u},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:Te([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],v):[c[0],c[1]]},v.translateExtent=function(t){return arguments.length?(h[0][0]=+t[0][0],h[1][0]=+t[1][0],h[0][1]=+t[0][1],h[1][1]=+t[1][1],v):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},v.constrain=function(t){return arguments.length?(o=t,v):o},v.duration=function(t){return arguments.length?(l=+t,v):l},v.interpolate=function(t){return arguments.length?(f=t,v):f},v.on=function(){var t=m.on.apply(m,arguments);return t===m?v:t},v.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,v):Math.sqrt(d)},v.tapDistance=function(t){return arguments.length?(g=+t,v):g},v}().on("start zoom end",(t=>{this.svg.attr("transform",t.transform)}))).append("g").attr("transform","translate(10,30)"),this.svg.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,10,10]).attr("refX",5).attr("refY",5).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto-start-reverse").append("path").attr("d",Ge()([[0,0],[0,10],[10,5]])).attr("stroke","black"),this.values_target=[...new Set(this.data.map((t=>t[this.target])))],null==this.target?this.colorScale=tr().domain(this.values_target).range(["black"]):this.colorScale=tr(Ke).domain(this.values_target)}createLegend(){const t=function(){var t,n,e,r,i=rr,o=ir,s=or,u=ar,c={},h=a("start","drag","end"),l=0,f=0;function m(t){t.on("mousedown.drag",p).filter(u).on("touchstart.drag",v).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var u=x(this,o.call(this,a,s),a,s,"mouse");u&&(wt(a.view).on("mousemove.drag",d,!0).on("mouseup.drag",g,!0),kt(a.view),bt(a),e=!1,t=a.clientX,n=a.clientY,u("start",a))}}function d(r){if(Mt(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>f}c.mouse("drag",r)}function g(t){wt(t.view).on("mousemove.drag mouseup.drag",null),At(t.view,e),Mt(t),c.mouse("end",t)}function v(t,n){if(i.call(this,t,n)){var e,r,a=t.changedTouches,s=o.call(this,t,n),u=a.length;for(e=0;e<u;++e)(r=x(this,s,t,n,a[e].identifier,a[e]))&&(bt(t),r("start",t,a[e]))}}function y(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=c[r[n].identifier])&&(Mt(t),e("drag",t,r[n]))}function _(t){var n,e,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<o;++n)(e=c[i[n].identifier])&&(bt(t),e("end",t,i[n]))}function x(t,n,e,r,i,o){var a,u,f,p=h.copy(),d=jt(o||e,n);if(null!=(f=s.call(t,new er("beforestart",{sourceEvent:e,target:m,identifier:i,active:l,x:d[0],y:d[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-d[0]||0,u=f.y-d[1]||0,function e(o,s,h){var g,v=d;switch(o){case"start":c[i]=e,g=l++;break;case"end":delete c[i],--l;case"drag":d=jt(h||s,n),g=l}p.call(o,t,new er(o,{sourceEvent:s,subject:f,target:m,identifier:i,active:g,x:d[0]+a,y:d[1]+u,dx:d[0]-v[0],dy:d[1]-v[1],dispatch:p}),r)}}return m.filter=function(t){return arguments.length?(i="function"==typeof t?t:nr(!!t),m):i},m.container=function(t){return arguments.length?(o="function"==typeof t?t:nr(t),m):o},m.subject=function(t){return arguments.length?(s="function"==typeof t?t:nr(t),m):s},m.touchable=function(t){return arguments.length?(u="function"==typeof t?t:nr(!!t),m):u},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,m):Math.sqrt(f)},m}().on("drag",(t=>{n.attr("transform",`translate(${t.x}, ${t.y})`)})),n=this.svg.append("g").attr("class","legend").style("position","absolute").attr("transform","translate(10, 30)").style("left",10).style("top",10).call(t);n.selectAll("label").data([this.target]).enter().append("text").attr("x",115).attr("y",85).text((t=>t)).attr("text-anchor","middle").attr("text-transform","uppercase").style("alignment-baseline","left"),n.selectAll("mydots").data(this.values_target).enter().append("rect").attr("x",100).attr("y",(function(t,n){return 100+15*n})).attr("width",10).attr("height",10).style("fill",(t=>this.colorScale(t))).on("click",((t,n)=>{this.items.style("display",(t=>t[this.target]==n?null:"none"))})),n.selectAll("mylabels").data(this.values_target).enter().append("text").attr("x",112).attr("y",(function(t,n){return 100+15*n+5})).style("fill",(t=>this.colorScale(t))).text((function(t){return t})).attr("text-anchor","left").style("alignment-baseline","middle")}initBrush(t){const n=new Map;this.brushed=(e,r)=>{e.sourceEvent.stopPropagation();let i=e.selection;null===i?n.delete(r):n.set(r,i.map((n=>t[r].invert(n))));var o=[];this.items.each((function(t){const e=Array.from(n).every((([n,[e,r]])=>t[n]>=e&&t[n]<=r));e&&o.push(t),wt(this).style("display",e?null:"none")})),this.filtered_items=o,this.dualview&&this.dualview.getItems().style("display",(t=>this.filtered_items.includes(t)?null:"none"))}}setOpacity(t){this.items.attr("opacity",t)}setDualView(t){this.dualview=t}getAxis(){return this.axis}getItems(){return this.items}getFiltered(){return this.filtered_items}colorize(t){t?this.items.style("stroke",(t=>this.colorScale(t[this.target]))):this.items.style("stroke","black"),function(t){return new yt([document.querySelectorAll(t)],[document.documentElement])}(".legend").style("display",t?null:"none")}}var Rr="$";function Cr(){}function Ir(t,n){var e=new Cr;if(t instanceof Cr)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function Fr(){}Cr.prototype=Ir.prototype={constructor:Cr,has:function(t){return Rr+t in this},get:function(t){return this[Rr+t]},set:function(t,n){return this[Rr+t]=n,this},remove:function(t){var n=Rr+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===Rr&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===Rr&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===Rr&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===Rr&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===Rr&&++t;return t},empty:function(){for(var t in this)if(t[0]===Rr)return!1;return!0},each:function(t){for(var n in this)n[0]===Rr&&t(this[n],n.slice(1),this)}};var Xr=Ir.prototype;function Dr(t){var n=[];for(var e in t)n.push(e);return n}Fr.prototype=function(t,n){var e=new Fr;if(t instanceof Fr)t.each((function(t){e.add(t)}));else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}.prototype={constructor:Fr,has:Xr.has,add:function(t){return this[Rr+(t+="")]=t,this},remove:Xr.remove,clear:Xr.clear,values:Xr.keys,size:Xr.size,empty:Xr.empty,each:Xr.each};var Br=Math.sqrt(50),$r=Math.sqrt(10),Ur=Math.sqrt(2);function Yr(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Br?10:o>=$r?5:o>=Ur?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Br?10:o>=$r?5:o>=Ur?2:1)}function Hr(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Qr(t){let n=t,e=t;function r(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>Hr(t(n),e)}(t)),{left:r,center:function(t,e,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,e,i,o-1);return a>i&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}const Zr=Qr(Hr),Gr=Zr.right,Kr=(Zr.left,Qr((function(t){return null===t?NaN:+t})).center,Gr);function Wr(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=ei(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function Jr(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ti(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=ei(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}function ni(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function ei(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?$n(n):("number"===i?tn:"string"===i?(e=En(n))?(n=e,Yn):Gn:n instanceof En?Yn:n instanceof Date?Jr:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?Wr:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?ti:tn:ni))(t,n)}function ri(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function ii(t){return+t}var oi=[0,1];function ai(t){return t}function si(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function ui(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=si(i,r),o=e(a,o)):(r=si(r,i),o=e(o,a)),function(t){return o(r(t))}}function ci(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=si(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=Kr(t,n,1,r)-1;return o[e](i[e](n))}}function hi(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function li(){return function(){var t,n,e,r,i,o,a=oi,s=oi,u=ei,c=ai;function h(){var t,n,e,u=Math.min(a.length,s.length);return c!==ai&&(t=a[0],n=a[u-1],t>n&&(e=t,t=n,n=e),c=function(e){return Math.max(t,Math.min(n,e))}),r=u>2?ci:ui,i=o=null,l}function l(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),s,u)))(t(c(n)))}return l.invert=function(e){return c(n((o||(o=r(s,a.map(t),tn)))(e)))},l.domain=function(t){return arguments.length?(a=Array.from(t,ii),h()):a.slice()},l.range=function(t){return arguments.length?(s=Array.from(t),h()):s.slice()},l.rangeRound=function(t){return s=Array.from(t),u=ri,h()},l.clamp=function(t){return arguments.length?(c=!!t||ai,h()):c!==ai},l.interpolate=function(t){return arguments.length?(u=t,h()):u},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,h()}}()(ai,ai)}var fi,mi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pi(t){if(!(n=mi.exec(t)))throw new Error("invalid format: "+t);var n;return new di({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function di(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function gi(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function vi(t){return(t=gi(Math.abs(t)))?t[1]:NaN}function yi(t,n){var e=gi(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}pi.prototype=di.prototype,di.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _i={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>yi(100*t,n),r:yi,s:function(t,n){var e=gi(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(fi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gi(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xi(t){return t}var wi,bi,Mi,ki=Array.prototype.map,Ai=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ti(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=Yr(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++s<i;)o[s]=(e+s)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++s<i;)o[s]=(e+s)/a}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return function(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Br?i*=10:o>=$r?i*=5:o>=Ur&&(i*=2),n<t?-i:i}(t,n,e);switch((r=pi(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vi(n)/3)))-vi(Math.abs(t)))}(o,a))||(r.precision=i),Mi(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,vi(n)-vi(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-vi(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return bi(r)}(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,s=o.length-1,u=o[a],c=o[s],h=10;for(c<u&&(i=u,u=c,c=i,i=a,a=s,s=i);h-- >0;){if((i=Yr(u,c,e))===r)return o[a]=u,o[s]=c,n(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Si(){var t=li();return t.copy=function(){return hi(t,Si())},We.apply(t,arguments),Ti(t)}function ji(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function Ni(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}wi=function(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?xi:(n=ki.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=n[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?xi:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(ki.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function l(t){var n=(t=pi(t)).fill,e=t.align,l=t.sign,f=t.symbol,m=t.zero,p=t.width,d=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(d=!0,y="g"):_i[y]||(void 0===g&&(g=12),v=!0,y="g"),(m||"0"===n&&"="===e)&&(m=!0,n="0",e="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?o:/[%p]/.test(y)?u:"",w=_i[y],b=/[defgprs%]/.test(y);function M(t){var i,o,u,f=_,M=x;if("c"===y)M=w(t)+M,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),g),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),k&&0==+t&&"+"!==l&&(k=!1),f=(k?"("===l?l:c:"-"===l||"("===l?"":l)+f,M=("s"===y?Ai[8+fi/3]:"")+M+(k&&"("===l?")":""),b)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){M=(46===u?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}d&&!m&&(t=r(t,1/0));var A=f.length+t.length+M.length,T=A<p?new Array(p-A+1).join(n):"";switch(d&&m&&(t=r(T+t,T.length?p-M.length:1/0),T=""),e){case"<":t=f+t+M+T;break;case"=":t=f+T+t+M;break;case"^":t=T.slice(0,A=T.length>>1)+f+t+M+T.slice(A);break;default:t=T+f+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:l,formatPrefix:function(t,n){var e=l(((t=pi(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(vi(n)/3))),i=Math.pow(10,-r),o=Ai[8+r/3];return function(t){return e(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),bi=wi.format,Mi=wi.formatPrefix;const Ei=t=>()=>t;function Pi(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function qi(t){t.stopImmediatePropagation()}function zi(t){t.preventDefault(),t.stopImmediatePropagation()}var Vi={name:"drag"},Li={name:"space"},Oi={name:"handle"},Ri={name:"center"};const{abs:Ci,max:Ii,min:Fi}=Math;function Xi(t){return[+t[0],+t[1]]}function Di(t){return[Xi(t[0]),Xi(t[1])]}var Bi={name:"x",handles:["w","e"].map(Gi),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},$i={name:"y",handles:["n","s"].map(Gi),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ui=(["n","w","e","s","nw","ne","sw","se"].map(Gi),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Yi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Hi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Qi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Zi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gi(t){return{type:t}}function Ki(t){return!t.ctrlKey&&!t.button}function Wi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ji(){return navigator.maxTouchPoints||"ontouchstart"in this}function to(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function no(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function eo(){return function(t){var n,e=Wi,r=Ki,i=Ji,o=!0,s=a("start","brush","end"),u=6;function c(n){var e=n.property("__brush",g).selectAll(".overlay").data([Gi("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ui.overlay).merge(e).each((function(){var t=to(this).extent;wt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([Gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ui.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Ui[t.type]})),n.each(h).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",m).filter(i).on("touchstart.brush",m).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){var t=wt(this),n=to(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-u/2:n[0][0]-u/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-u/2:n[0][1]-u/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+u:u})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+u:u}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new f(t,n,e):r}function f(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function m(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,a,s,u,c,f,m,p,d,g,v,y=this,_=e.target.__data__.type,x="selection"===(o&&e.metaKey?_="overlay":_)?Vi:o&&e.altKey?Ri:Oi,w=t===$i?null:Qi[_],b=t===Bi?null:Zi[_],M=to(y),k=M.extent,A=M.selection,T=k[0][0],S=k[0][1],j=k[1][0],N=k[1][1],E=0,P=0,q=w&&b&&o&&e.shiftKey,z=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=jt(t,y)).point0=t.slice(),t.identifier=n,t}));if("overlay"===_){A&&(d=!0);const n=[z[0],z[1]||z[0]];M.selection=A=[[i=t===$i?T:Fi(n[0][0],n[1][0]),s=t===Bi?S:Fi(n[0][1],n[1][1])],[c=t===$i?j:Ii(n[0][0],n[1][0]),m=t===Bi?N:Ii(n[0][1],n[1][1])]],z.length>1&&I()}else i=A[0][0],s=A[0][1],c=A[1][0],m=A[1][1];a=i,u=s,f=c,p=m;var V=wt(y).attr("pointer-events","none"),L=V.selectAll(".overlay").attr("cursor",Ui[_]);Jt(y);var O=l(y,arguments,!0).beforestart();if(e.touches)O.moved=C,O.ended=F;else{var R=wt(e.view).on("mousemove.brush",C,!0).on("mouseup.brush",F,!0);o&&R.on("keydown.brush",X,!0).on("keyup.brush",D,!0),kt(e.view)}h.call(y),O.start(e,x.name)}function C(t){for(const n of t.changedTouches||[t])for(const t of z)t.identifier===n.identifier&&(t.cur=jt(n,y));if(q&&!g&&!v&&1===z.length){const t=z[0];Ci(t.cur[0]-t[0])>Ci(t.cur[1]-t[1])?v=!0:g=!0}for(const t of z)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);d=!0,zi(t),I(t)}function I(t){const n=z[0],e=n.point0;var r;switch(E=n[0]-e[0],P=n[1]-e[1],x){case Li:case Vi:w&&(E=Ii(T-i,Fi(j-c,E)),a=i+E,f=c+E),b&&(P=Ii(S-s,Fi(N-m,P)),u=s+P,p=m+P);break;case Oi:z[1]?(w&&(a=Ii(T,Fi(j,z[0][0])),f=Ii(T,Fi(j,z[1][0])),w=1),b&&(u=Ii(S,Fi(N,z[0][1])),p=Ii(S,Fi(N,z[1][1])),b=1)):(w<0?(E=Ii(T-i,Fi(j-i,E)),a=i+E,f=c):w>0&&(E=Ii(T-c,Fi(j-c,E)),a=i,f=c+E),b<0?(P=Ii(S-s,Fi(N-s,P)),u=s+P,p=m):b>0&&(P=Ii(S-m,Fi(N-m,P)),u=s,p=m+P));break;case Ri:w&&(a=Ii(T,Fi(j,i-E*w)),f=Ii(T,Fi(j,c+E*w))),b&&(u=Ii(S,Fi(N,s-P*b)),p=Ii(S,Fi(N,m+P*b)))}f<a&&(w*=-1,r=i,i=c,c=r,r=a,a=f,f=r,_ in Yi&&L.attr("cursor",Ui[_=Yi[_]])),p<u&&(b*=-1,r=s,s=m,m=r,r=u,u=p,p=r,_ in Hi&&L.attr("cursor",Ui[_=Hi[_]])),M.selection&&(A=M.selection),g&&(a=A[0][0],f=A[1][0]),v&&(u=A[0][1],p=A[1][1]),A[0][0]===a&&A[0][1]===u&&A[1][0]===f&&A[1][1]===p||(M.selection=[[a,u],[f,p]],h.call(y),O.brush(t,x.name))}function F(t){if(qi(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else At(t.view,d),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),L.attr("cursor",Ui.overlay),M.selection&&(A=M.selection),no(A)&&(M.selection=null,h.call(y)),O.end(t,x.name)}function X(t){switch(t.keyCode){case 16:q=w&&b;break;case 18:x===Oi&&(w&&(c=f-E*w,i=a+E*w),b&&(m=p-P*b,s=u+P*b),x=Ri,I());break;case 32:x!==Oi&&x!==Ri||(w<0?c=f-E:w>0&&(i=a-E),b<0?m=p-P:b>0&&(s=u-P),x=Li,L.attr("cursor",Ui.selection),I());break;default:return}zi(t)}function D(t){switch(t.keyCode){case 16:q&&(g=v=q=!1,I());break;case 18:x===Ri&&(w<0?c=f:w>0&&(i=a),b<0?m=p:b>0&&(s=u),x=Oi,I());break;case 32:x===Li&&(t.altKey?(w&&(c=f-E*w,i=a+E*w),b&&(m=p-P*b,s=u+P*b),x=Ri):(w<0?c=f:w>0&&(i=a),b<0?m=p:b>0&&(s=u),x=Oi),L.attr("cursor",Ui[_]),I());break;default:return}zi(t)}}function p(t){l(this,arguments).moved(t)}function d(t){l(this,arguments).ended(t)}function g(){var n=this.__brush||{selection:null};return n.extent=Di(e.apply(this,arguments)),n.dim=t,n}return c.move=function(n,e){n.tween?n.on("start.brush",(function(t){l(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=l(n,arguments),o=r.selection,a=t.input("function"==typeof e?e.apply(this,arguments):e,r.extent),s=ei(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),h.call(n),i.brush()}return null!==o&&null!==a?u:u(1)})):n.each((function(){var n=this,r=arguments,i=n.__brush,o=t.input("function"==typeof e?e.apply(n,r):e,i.extent),a=l(n,r).beforestart();Jt(n),i.selection=null===o?null:o,h.call(n),a.start().brush().end()}))},c.clear=function(t){c.move(t,null)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=wt(this.that).datum();s.call(n,this.that,new Pi(n,{sourceEvent:e,target:c,selection:t.output(this.state.selection),mode:r,dispatch:s}),i)}},c.extent=function(t){return arguments.length?(e="function"==typeof t?t:Ei(Di(t)),c):e},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:Ei(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Ei(!!t),c):i},c.handleSize=function(t){return arguments.length?(u=+t,c):u},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=s.on.apply(s,arguments);return t===s?c:t},c}(Bi)}function ro(){}function io(t){this._context=t}function oo(t){return new io(t)}function ao(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function so(t,n){this._context=t,this._k=(1-n)/6}function uo(t,n){this._context=t,this._k=(1-n)/6}io.prototype={areaStart:ro,areaEnd:ro,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},so.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ao(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:ao(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new so(t,n)}return e.tension=function(n){return t(+n)},e}(0),uo.prototype={areaStart:ro,areaEnd:ro,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:ao(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const co=function t(n){function e(t){return new uo(t,n)}return e.tension=function(n){return t(+n)},e}(0);var ho=Array.prototype.slice;function lo(t){return t}var fo=1e-6;function mo(t){return"translate("+t+",0)"}function po(t){return"translate(0,"+t+")"}function go(t){return n=>+t(n)}function vo(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function yo(){return!this.__axis}function _o(t,n){var e=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,h=4===t||2===t?"x":"y",l=1===t||3===t?mo:po;function f(f){var m=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):lo:i,d=Math.max(o,0)+s,g=n.range(),v=+g[0]+u,y=+g[g.length-1]+u,_=(n.bandwidth?vo:go)(n.copy(),u),x=f.selection?f.selection():f,w=x.selectAll(".domain").data([null]),b=x.selectAll(".tick").data(m,n).order(),M=b.exit(),k=b.enter().append("g").attr("class","tick"),A=b.select("line"),T=b.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(k),A=A.merge(k.append("line").attr("stroke","currentColor").attr(h+"2",c*o)),T=T.merge(k.append("text").attr("fill","currentColor").attr(h,c*d).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==x&&(w=w.transition(f),b=b.transition(f),A=A.transition(f),T=T.transition(f),M=M.transition(f).attr("opacity",fo).attr("transform",(function(t){return isFinite(t=_(t))?l(t+u):this.getAttribute("transform")})),k.attr("opacity",fo).attr("transform",(function(t){var n=this.parentNode.__axis;return l((n&&isFinite(n=n(t))?n:_(t))+u)}))),M.remove(),w.attr("d",4===t||2===t?a?"M"+c*a+","+v+"H"+u+"V"+y+"H"+c*a:"M"+u+","+v+"V"+y:a?"M"+v+","+c*a+"V"+u+"H"+y+"V"+c*a:"M"+v+","+u+"H"+y),b.attr("opacity",1).attr("transform",(function(t){return l(_(t)+u)})),A.attr(h+"2",c*o),T.attr(h,c*d).text(p),x.filter(yo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=_}))}return f.scale=function(t){return arguments.length?(n=t,f):n},f.ticks=function(){return e=ho.call(arguments),f},f.tickArguments=function(t){return arguments.length?(e=null==t?[]:ho.call(t),f):e.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:ho.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(o=a=+t,f):o},f.tickSizeInner=function(t){return arguments.length?(o=+t,f):o},f.tickSizeOuter=function(t){return arguments.length?(a=+t,f):a},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(u=+t,f):u},f}function xo(t){return _o(3,t)}function wo(t){return _o(4,t)}class bo extends Or{constructor(t){super(t),this.curve=oo,this.radius=200}draw(){this.width,this.dimensions.length;const t=360/this.dimensions.length,n=ji(this.dimensions.length).map(((n,e)=>e*t));var e={};Dr(this.data[0]).filter(((t,n)=>t!=this.target&&(e[t]=Si().domain(Ni(this.data,(function(n){return+n[t]}))).range([0,this.radius])))),super.initBrush(e);const r=eo().extent([[0,-10],[this.radius,10]]).on("start brush end",this.brushed),i=t=>t*Math.PI/180;this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(t=>{let r=this.width/2,o=this.height/2,a=this.dimensions.map(((a,s)=>{let u=n[s],c=e[a](t[a]),h=r+Math.cos(i(u))*c,l=o+Math.sin(i(u))*c;return this.dynamic&&(r=h,o=l),[h,l]}));return Ge().curve(this.curve)(a)})).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll(".axis").data(this.dimensions).join("g").attr("transform",((t,e)=>`translate(${this.width/2},${this.height/2}) rotate(${n[e]})`)).each((function(t){wt(this).call(xo(e[t]).ticks([]).tickSize(0).offset(0))})).call(r).call((t=>t.append("text").attr("x",this.radius+10).attr("y",0).attr("text-anchor","start").attr("fill","currentColor").text((t=>t)))),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}setCurve(t){this.curve="CURVE"==t?co:oo}setRadius(t){this.radius=t}}function Mo(t,n=ko){const e=[];let r,i=!1;for(const o of t)i&&e.push(n(r,o)),r=o,i=!0;return e}function ko(t,n){return[t,n]}class Ao extends Or{constructor(t){super(t),this.TYPE_LINE="CURVE",this.classes=null,this.oneclass=null}draw(){const t=this.width/this.dimensions.length,n=t/2,e=ji(this.dimensions.length).map((t=>0));var r={};Dr(this.data[0]).filter(((n,e)=>n!=this.target&&(r[n]=Si().domain(Ni(this.data,(function(t){return+t[n]}))).range([0,t]))));const i=Si().domain([0,2*t]).range([this.height/2,0]),o=Si().domain([0,2*t]).range([this.height/2,this.height]);this.svg.selectAll(".labels").data(this.dimensions).enter().append("text").text((t=>t)).attr("x",((e,r)=>r*t+n)).attr("y",30).attr("text-anchor","middle").style("font-size",12),super.initBrush(r);const a=eo().extent([[0,-15],[t,15]]).on("start brush end",this.brushed),s=(n,e,a,s)=>{let u=[],c=Mo(this.dimensions);return c.forEach(((h,l)=>{let[f,m]=c[l],p=l*t+r[f](n[f]),d=(l+1)*t+r[m](n[m]);0==l&&u.push(`M${p},${this.height/2}`);let g=Math.abs(d-p),v=i(g),y=p+(d-p)/2;if(null!==a&&n[this.target]!=a&&(v=o(g)),null!==s){let[t,e]=s;if(n[this.target]==t)v=v;else{if(n[this.target]!=e)return;v=o(g)}}"CURVE"==e?u.push(`Q ${y},${v} ${d},${this.height/2}`):u.push(`L${y},${v} L${d},${this.height/2}`)})),u};this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(t=>s(t,this.TYPE_LINE,this.oneclass,this.classes))).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll("g").data(this.dimensions).join("g").attr("transform",((n,r)=>`translate(${r*t},${this.height/2}) rotate(${-e[r]})`)).each((function(t){wt(this).call(xo(r[t]).ticks([]).tickSize(0))})).call(a),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}compareClasses(t,n){this.classes=[t,n]}focusClass(t){this.oneclass=t}setLine(t){this.TYPE_LINE="TRIANGULAR"==t?"TRIANGULAR":"CURVE"}}var To=Math.abs,So=Math.atan2,jo=Math.cos,No=Math.max,Eo=Math.min,Po=Math.sin,qo=Math.sqrt,zo=1e-12,Vo=Math.PI,Lo=Vo/2,Oo=2*Vo;function Ro(t){return t>1?0:t<-1?Vo:Math.acos(t)}function Co(t){return t>=1?Lo:t<=-1?-Lo:Math.asin(t)}function Io(t){return t.innerRadius}function Fo(t){return t.outerRadius}function Xo(t){return t.startAngle}function Do(t){return t.endAngle}function Bo(t){return t&&t.padAngle}function $o(t,n,e,r,i,o,a,s){var u=e-t,c=r-n,h=a-i,l=s-o,f=l*u-h*c;if(!(f*f<zo))return[t+(f=(h*(n-o)-l*(t-i))/f)*u,n+f*c]}function Uo(t,n,e,r,i,o,a){var s=t-e,u=n-r,c=(a?o:-o)/qo(s*s+u*u),h=c*u,l=-c*s,f=t+h,m=n+l,p=e+h,d=r+l,g=(f+p)/2,v=(m+d)/2,y=p-f,_=d-m,x=y*y+_*_,w=i-o,b=f*d-p*m,M=(_<0?-1:1)*qo(No(0,w*w*x-b*b)),k=(b*_-y*M)/x,A=(-b*y-_*M)/x,T=(b*_+y*M)/x,S=(-b*y+_*M)/x,j=k-g,N=A-v,E=T-g,P=S-v;return j*j+N*N>E*E+P*P&&(k=T,A=S),{cx:k,cy:A,x01:-h,y01:-l,x11:k*(i/w-1),y11:A*(i/w-1)}}class Yo extends Or{constructor(t){super(t),this.radius=200}draw(){const t=2*Math.PI/this.dimensions.length;var n={};this.dimensions.forEach(((e,r)=>{n[e]=Si().domain(Ni(this.data,(function(t){return+t[e]}))).range([t*r,t*(r+1)])})),this.items=this.svg.attr("transform",`translate(${this.width/2}, ${this.height/2})`).selectAll(".items").data(this.data).enter().append("path").attr("d",(t=>{let e=this.dimensions.map((e=>[Math.cos(n[e](t[e]))*(this.radius-5),Math.sin(n[e](t[e]))*(this.radius-5)]));return Ge().curve(oo)(e)})).attr("stroke",(t=>this.colorScale(t[this.target]))).style("fill","none");const e=function(){var t=Io,n=Fo,e=Ue(0),r=null,i=Xo,o=Do,a=Bo,s=null;function u(){var u,c,h=+t.apply(this,arguments),l=+n.apply(this,arguments),f=i.apply(this,arguments)-Lo,m=o.apply(this,arguments)-Lo,p=To(m-f),d=m>f;if(s||(s=u=$e()),l<h&&(c=l,l=h,h=c),l>zo)if(p>Oo-zo)s.moveTo(l*jo(f),l*Po(f)),s.arc(0,0,l,f,m,!d),h>zo&&(s.moveTo(h*jo(m),h*Po(m)),s.arc(0,0,h,m,f,d));else{var g,v,y=f,_=m,x=f,w=m,b=p,M=p,k=a.apply(this,arguments)/2,A=k>zo&&(r?+r.apply(this,arguments):qo(h*h+l*l)),T=Eo(To(l-h)/2,+e.apply(this,arguments)),S=T,j=T;if(A>zo){var N=Co(A/h*Po(k)),E=Co(A/l*Po(k));(b-=2*N)>zo?(x+=N*=d?1:-1,w-=N):(b=0,x=w=(f+m)/2),(M-=2*E)>zo?(y+=E*=d?1:-1,_-=E):(M=0,y=_=(f+m)/2)}var P=l*jo(y),q=l*Po(y),z=h*jo(w),V=h*Po(w);if(T>zo){var L,O=l*jo(_),R=l*Po(_),C=h*jo(x),I=h*Po(x);if(p<Vo&&(L=$o(P,q,C,I,O,R,z,V))){var F=P-L[0],X=q-L[1],D=O-L[0],B=R-L[1],$=1/Po(Ro((F*D+X*B)/(qo(F*F+X*X)*qo(D*D+B*B)))/2),U=qo(L[0]*L[0]+L[1]*L[1]);S=Eo(T,(h-U)/($-1)),j=Eo(T,(l-U)/($+1))}}M>zo?j>zo?(g=Uo(C,I,P,q,l,j,d),v=Uo(O,R,z,V,l,j,d),s.moveTo(g.cx+g.x01,g.cy+g.y01),j<T?s.arc(g.cx,g.cy,j,So(g.y01,g.x01),So(v.y01,v.x01),!d):(s.arc(g.cx,g.cy,j,So(g.y01,g.x01),So(g.y11,g.x11),!d),s.arc(0,0,l,So(g.cy+g.y11,g.cx+g.x11),So(v.cy+v.y11,v.cx+v.x11),!d),s.arc(v.cx,v.cy,j,So(v.y11,v.x11),So(v.y01,v.x01),!d))):(s.moveTo(P,q),s.arc(0,0,l,y,_,!d)):s.moveTo(P,q),h>zo&&b>zo?S>zo?(g=Uo(z,V,O,R,h,-S,d),v=Uo(P,q,C,I,h,-S,d),s.lineTo(g.cx+g.x01,g.cy+g.y01),S<T?s.arc(g.cx,g.cy,S,So(g.y01,g.x01),So(v.y01,v.x01),!d):(s.arc(g.cx,g.cy,S,So(g.y01,g.x01),So(g.y11,g.x11),!d),s.arc(0,0,h,So(g.cy+g.y11,g.cx+g.x11),So(v.cy+v.y11,v.cx+v.x11),d),s.arc(v.cx,v.cy,S,So(v.y11,v.x11),So(v.y01,v.x01),!d))):s.arc(0,0,h,w,x,d):s.lineTo(z,V)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Vo/2;return[jo(r)*e,Po(r)*e]},u.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ue(+n),u):t},u.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ue(+t),u):n},u.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ue(+t),u):e},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ue(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ue(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ue(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ue(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}().innerRadius(this.radius-3).outerRadius(this.radius).startAngle(((n,e)=>t*e)).endAngle(((n,e)=>t*(e+1)));this.svg.selectAll(".dimensions").data(this.dimensions).enter().append("path").attr("class","dimension").attr("id",(function(t,n){return"dimensionArc_"+n})).attr("d",e).attr("stroke","gray").attr("fill","gray"),this.svg.selectAll(".dimText").data(this.dimensions).enter().append("text").attr("class","dimext").attr("x",100).attr("dy",-5).append("textPath").attr("xlink:href",(function(t,n){return"#dimensionArc_"+n})).text((function(t){return t})),this.svg.selectAll(".dimension").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}setRadius(t){this.radius=t}}class Ho extends Or{constructor(t){super(t),this.orientations=ji(this.dimensions.length).map((t=>360*Math.random()))}draw(){const t=this.width/this.dimensions.length,n=t/2;var e={};Dr(this.data[0]).filter(((n,r)=>n!=this.target&&(e[n]=Si().domain(Ni(this.data,(function(t){return+t[n]}))).range([0,t])))),super.initBrush(e);const r=eo().extent([[0,-10],[t,10]]).on("start brush end",this.brushed),i=t=>t*Math.PI/180;let o={},a=this.width/2,s=this.height/2;this.axis=this.svg.append("g").selectAll("g").data(this.dimensions).join("g").attr("transform",((n,e)=>{let r=a,u=s,c=-this.orientations[e];return o[n]=[r,u],a+=t*Math.cos(i(c)),s+=t*Math.sin(i(c)),`translate(${r},${u}) rotate(${c})`})).each((function(t){wt(this).call(xo(e[t]).ticks([]).tickSize(0).offset(0))})).call(r).call((t=>t.append("text").attr("x",n).attr("y",-6).attr("text-anchor","start").attr("fill","currentColor").text((t=>t)))),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none"),this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",this.dynamic?t=>{let[n,r]=o[this.dimensions[0]],a=[[n,r]];return this.dimensions.forEach(((o,s)=>{let u=-this.orientations[s],c=e[o](t[o]),h=n+Math.cos(i(u))*c,l=r+Math.sin(i(u))*c;n=h,r=l,a.push([h,l])})),Ge()(a)}:t=>{let n=this.dimensions.map(((n,r)=>{let a=-this.orientations[r],s=o[n][0],u=o[n][1],c=e[n](t[n]);return[s+Math.cos(i(a))*c,u+Math.sin(i(a))*c]}));return Ge()(n)}).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1)}setOrientations(t){this.orientations=t}}function Qo(){var t,n,e=tr().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,s=!1,u=0,c=0,h=.5;function l(){var e=r().length,l=a<o,f=l?a:o,m=l?o:a;t=(m-f)/Math.max(1,e-u+2*c),s&&(t=Math.floor(t)),f+=(m-f-t*(e-u))*h,n=t*(1-u),s&&(f=Math.round(f),n=Math.round(n));var p=ji(e).map((function(n){return f+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,l()):[o,a]},e.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(s=!!t,l()):s},e.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),l()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),l()):u},e.paddingOuter=function(t){return arguments.length?(c=+t,l()):c},e.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),l()):h},e.copy=function(){return Qo(r(),[o,a]).round(s).paddingInner(u).paddingOuter(c).align(h)},We.apply(l(),arguments)}function Zo(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Zo(n())},t}function Go(){return Zo(Qo.apply(null,arguments).paddingInner(1))}class Ko extends Or{constructor(t){super(t)}draw(){const t=this.height-50,n=(new Map,Go().domain(ji(this.dimensions.length)).range([120,60]).padding(1)),e=ji(this.dimensions.length).map((t=>n(t)));var r={};Dr(this.data[0]).filter((n=>n!=this.target&&(r[n]=Si().domain(Ni(this.data,(function(t){return+t[n]}))).range([0,t]))));const i=Go().range([100,this.width-100]).padding(1).domain(this.dimensions);this.svg.selectAll(".labels").data(this.dimensions).enter().append("text").text((t=>t)).attr("x",(t=>i(t))).attr("y",this.height+5).attr("text-anchor","middle").style("font-size",12),super.initBrush(r);const o=eo().extent([[0,-15],[t,15]]).on("start brush end",this.brushed),a=t=>t*Math.PI/180;this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",this.dynamic?t=>{let n=i(this.dimensions[0]),o=this.height-20,s=[[n,o]];return this.dimensions.forEach(((i,u)=>{let c=-e[u],h=r[i](t[i]),l=n+Math.cos(a(c))*h,f=o+Math.sin(a(c))*h;n=l,o=f,s.push([l,f])})),Ge()(s)}:t=>{let n=this.dimensions.map(((n,o)=>{let s=-e[o],u=i(n),c=this.height-20,h=r[n](t[n]);return[u+Math.cos(a(s))*h,c+Math.sin(a(s))*h]}));return Ge()(n)}).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll("g").data(this.dimensions).join("g").attr("transform",((t,n)=>`translate(${i(t)},${this.height-20}) rotate(${-e[n]})`)).each((function(t){wt(this).call(xo(r[t]).ticks([]).tickSize(0))})).call(o),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}}class Wo extends Or{constructor(t){super(t),this.orientations=ji(this.dimensions.length).map((t=>360*Math.random())),this.pcp=!1}draw(){const t=this.width/this.dimensions.length,n=this.pcp?(this.height-30)/2:t/2;var e={};Dr(this.data[0]).filter(((t,r)=>t!=this.target&&(e[t]=Si().domain(Ni(this.data,(function(n){return+n[t]}))).range([-n,n]))));var r={};Dr(this.data[0]).filter(((n,e)=>n!=this.target&&(r[n]=Si().domain(Ni(this.data,(function(t){return+t[n]}))).range([0,this.pcp?this.height-30:t])))),this.svg.selectAll(".labels").data(this.dimensions).enter().append("text").text((t=>t)).attr("x",((e,r)=>r*t+n)).attr("y",10).attr("text-anchor","middle").style("font-size",12),super.initBrush(e);const i=eo().extent([[-n,-10],[n,10]]).on("start brush end",this.brushed),o=t=>t*Math.PI/180;this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",this.dynamic?t=>{let i=-this.orientations[0],a=e[this.dimensions[0]](e[this.dimensions[0]].domain()[0]),s=n+Math.cos(o(i))*a,u=this.height/2+Math.sin(o(i))*a,c=[[s,u]];return this.dimensions.forEach(((n,e)=>{let i=-this.orientations[e],a=r[n](t[n]),h=s+Math.cos(o(i))*a,l=u+Math.sin(o(i))*a;s=h,u=l,c.push([h,l])})),Ge()(c)}:r=>{let i=this.dimensions.map(((i,a)=>{let s=-this.orientations[a],u=a*t+n,c=this.height/2,h=e[i](r[i]);return[u+Math.cos(o(s))*h,c+Math.sin(o(s))*h]}));return Ge()(i)}).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll("g").data(this.dimensions).join("g").attr("transform",((e,r)=>`translate(${r*t+n},${this.height/2}) rotate(${-this.orientations[r]})`)).each((function(t){wt(this).call(xo(e[t]).ticks([]).tickSize(0).offset(0))})).call(i),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}setOrientations(t){this.orientations=t}setPCP(t){this.pcp=t}}class Jo extends Or{constructor(t){super(t)}draw(){let t=[];for(let n=0;n<this.dimensions.length;n+=2)t.push(this.dimensions.slice(n,n+2));const n=Si().domain([0,1]).range([0,this.width]),e=Si().domain([0,1]).range([this.height,0]);var r={};Dr(this.data[0]).filter((t=>t!=this.target&&(r[t]=Si().domain(Ni(this.data,(n=>+n[t]))).range([0,1])))),this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(function(i){let o=t.map((t=>{let o=r[t[0]](i[t[0]]),a=r[t[1]](i[t[1]]);return[n(o),e(a)]}));return Ge()(o)})).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll(".axis").data([n,e]).join("g").attr("transform",((t,n)=>`translate(0,${0==n?this.height:0})`)).each((function(t,n){0==n?wt(this).call(xo(t).ticks([]).tickSize(0)):wt(this).call(wo(t).ticks([]).tickSize(0))})),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}}class ta extends Or{constructor(t){super(t)}draw(){let t=[];for(let n=0;n<this.dimensions.length;n+=2)t.push(this.dimensions.slice(n,n+2));const n=Si().domain([0,t.length]).range([0,this.width]),e=Si().domain([0,t.length]).range([this.height,0]);var r={};Dr(this.data[0]).filter((t=>t!=this.target&&(r[t]=Si().domain(Ni(this.data,(n=>+n[t]))).range([0,1])))),this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(function(i){let o=t.map(((t,o)=>{let a=r[t[0]](i[t[0]])+o,s=r[t[1]](i[t[1]])+o;return[n(a),e(s)]}));return Ge()(o)})).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll(".axis").data([n,e]).join("g").attr("transform",((t,n)=>`translate(0,${0==n?this.height:0})`)).each((function(t,n){0==n?wt(this).call(xo(t).ticks([]).tickSize(0)):wt(this).call(wo(t).ticks([]).tickSize(0))})),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}}class na extends Or{constructor(t){super(t),this.anchor=[.2,.4]}draw(){let t=[];for(let n=0;n<this.dimensions.length;n+=2)t.push(this.dimensions.slice(n,n+2));const n=Si().domain([0,this.anchor[0]+1]).range([0,this.width]),e=Si().domain([0,this.anchor[1]+1]).range([this.height,0]);var r={};Dr(this.data[0]).filter((t=>t!=this.target&&(r[t]=Si().domain(Ni(this.data,(n=>+n[t]))).range([0,1])))),this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(i=>{let o=t.map((t=>{let o=r[t[0]](i[t[0]])+this.anchor[0],a=r[t[1]](i[t[1]])+this.anchor[1];return[[n(this.anchor[0]),e(this.anchor[1])],[n(o),e(a)]]}));return Ge()(o.flat())})).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",.5),this.axis=this.svg.append("g").selectAll(".axis").data([n,e]).join("g").attr("transform",((t,n)=>`translate(0,${0==n?this.height:0})`)).each((function(t,n){0==n?wt(this).call(xo(t).ticks([]).tickSize(0)):wt(this).call(wo(t).ticks([]).tickSize(0))})),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}setAnchor(t,n){this.anchor=[t,n]}}class ea extends Or{constructor(t){super(t),this.curve=oo,this.radius=200}draw(){this.width,this.dimensions.length;const t=360/(this.dimensions.length/2),n=ji(this.dimensions.length/2).map(((n,e)=>e*t));var e={};this.dimensions.forEach((t=>{var[n,r]=Ni(this.data,(n=>+n[t]));e[t]=function(t){return(t-n)/(r-n)}}));var r={};this.dimensions.forEach((t=>{r[t]=Si().domain([0,1]).range([0,this.radius])}));const i=t=>t*Math.PI/180;this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(t=>{let o=[];for(let a=0,s=0;this.dimensions.length,s<n.length;a+=2,s++){let u=this.width/2,c=this.height/2,h=n[s],l=this.dimensions[a],f=e[l](t[l]),m=r[l](f);u+=Math.cos(i(h))*m,c+=Math.sin(i(h))*m;let p=s==n.length-1?0:s+1;h=n[p],l=this.dimensions[a+1],m=r[l](e[l](t[l]));let d=u+Math.cos(i(h))*m,g=c+Math.sin(i(h))*m;o.push([d,g])}return Ge().curve(this.curve)(o)})).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.axis=this.svg.append("g").selectAll(".axis").data(Mo(this.dimensions.slice(-1).concat(this.dimensions.slice(0,-1))).filter(((t,n)=>n%2==0))).join("g").attr("transform",((t,e)=>`translate(${this.width/2},${this.height/2}) rotate(${n[e]})`)).each((function(t){wt(this).call(xo(r[t[0]]).ticks([]).tickSize(0))})).call((t=>t.append("text").attr("x",this.radius+10).attr("y",-6).attr("text-anchor","start").attr("fill","currentColor").text((t=>t[0])))).call((t=>t.append("text").attr("x",this.radius+10).attr("y",12).attr("text-anchor","start").attr("fill","currentColor").text((t=>t[1])))),this.svg.selectAll(".domain").attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none"),this.svg.append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",1).attr("fill","black")}setCurve(t){this.curve="CURVE"==t?co:oo}setRadius(t){this.radius=t}}class ra extends Or{constructor(t){super(t),this.rx=300,this.ry=200}draw(){const t=this.dimensions.length,n=2*Math.PI/t,e=this.width/2,r=this.height/2;var i=[],o={};this.dimensions.forEach((t=>{var[n,e]=Ni(this.data,(n=>+n[t]));o[t]=function(t){return(t-n)/(e-n)}}));var a={};this.dimensions.forEach(((t,e)=>{a[t]=Si().domain([0,1]).range([3*Math.PI/2+e*n,3*Math.PI/2+e*n+n-.01])}));const s=(n,e)=>{let r=Math.pow(this.ry,2),o=Math.pow(this.rx,2),a=-(Math.pow(i[n][1],2)-Math.pow(i[e][1],2))/(2*(-i[n][1]+i[e][1])),s=i[n][0];return t/2%2==0?n<t/2?s-=Math.sqrt(o-o*Math.pow(a-i[n][1],2)/r):s+=Math.sqrt(o-o*Math.pow(a-i[n][1],2)/r):n<t/2-1?s-=Math.sqrt(o-o*Math.pow(a-i[n][1],2)/r):n==t/2-1?(s=-(Math.pow(i[n][0],2)-Math.pow(i[e][0],2))/(2*(-i[n][0]+i[e][0])),a=i[n][1],a-=Math.sqrt(r-r*Math.pow(s-i[n][0],2)/o)):s+=Math.sqrt(o-o*Math.pow(a-i[n][1],2)/r),[s,a]},u=(t,n,o)=>{let a=Math.round(n[t][0]),s=Math.round(n[t][1]),u=0,c=0,h=0,l=0,f=0,m=0,p="",d=Math.pow(this.ry,2),g=Math.pow(this.rx,2);"Left"==o&&(u=e-this.rx,c=0,h=a-u,l=Math.pow(h,2),t%2==1?(p="red",c=s+Math.sqrt((1-l/g)*d)):(p="blue",c=s-Math.sqrt((1-l/g)*d))),"Right"==o&&(u=e+this.rx,c=0,h=a-u,l=Math.pow(h,2),t%2==1?(p="red",c=s-Math.sqrt((1-l/g)*d)):(p="blue",c=s+Math.sqrt((1-l/g)*d))),"Down"==o&&(c=r+this.ry,u=0,f=s-c,m=Math.pow(f,2),t%2==0?(p="red",u=a-Math.sqrt((1-m/d)*g)):(p="blue",u=a+Math.sqrt((1-m/d)*g))),i[t]=[u,c]};this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",((n,i)=>{let c=[],h=[];if(this.dimensions.forEach(((t,i)=>{let s=a[t](o[t](n[t])),u=e+Math.cos(s)*this.rx,h=r+Math.sin(s)*this.ry;c.push([u,h]),this.svg.append("circle").attr("cx",u).attr("cy",h).attr("r",1).attr("stroke","purple").attr("fill","purple").attr("id",t)})),t/2%2==0){for(let n=0;n<t/2;n++)u(n,c,"Right");for(let n=t/2;n<t;n++)u(n,c,"Left")}else{for(let n=0;n<t/2-1;n++)u(n,c,"Right");for(let n=t/2-1;n<t/2+1;n++)u(n,c,"Down");for(let n=t/2+1;n<t;n++)u(n,c,"Left")}for(let n=0;n<t;n+=2)h.push(s(n,n+1));return Ge()(h)})).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.svg.append("ellipse").attr("cx",e).attr("cy",r).attr("rx",this.rx).attr("ry",this.ry).attr("stroke","black").attr("fill","none"),this.svg.selectAll(".dimensions").data(this.dimensions).enter().append("line").attr("x1",e).attr("y1",r).attr("x2",((t,r)=>e+Math.cos(3*Math.PI/2+r*n)*this.rx)).attr("y2",((t,e)=>r+Math.sin(3*Math.PI/2+e*n)*this.ry)).attr("stroke","black").style("stroke-dasharray","3, 3").style("stroke-width",.3),this.svg.append("line").attr("x1",e).attr("y1",r-(this.ry+20)).attr("x2",e).attr("y2",r+(this.ry+20)).attr("stroke","purple").style("stroke-dasharray","3, 3")}}class ia extends Or{constructor(t){super(t),this.radius=200}draw(){const t=this.dimensions.length,n=this.width/2,e=this.height/2;var r={};this.dimensions.forEach((t=>{var[n,e]=Ni(this.data,(n=>+n[t]));r[t]=function(t){return(t-n)/(e-n)}}));var i=Si().domain([0,1]).range([0,2*Math.PI]);this.items=this.svg.append("g").selectAll(".items").data(this.data).enter().append("path").attr("d",(o=>{var a=[];let s=0,u=0,c=0;this.dimensions.forEach((t=>{o[t]=r[t](o[t])}));let h=Mo(this.dimensions).filter(((t,n)=>n%2==0));h=h.sort((function(t,n){return+o[t]>+o[n]?1:+o[t]<+o[n]?-1:0})),h=h.flat();for(let r=0;r<t;r++){let t=h[r],l=o[t];r%2==0?(c=i(l),s=n+this.radius*Math.cos(c),u=e+this.radius*Math.sin(c)):(s=n+(this.radius+50*l)*Math.cos(c),u=e+(this.radius+50*l)*Math.sin(c),a.push([s,u]))}return Ge()(a)})).attr("stroke",(t=>this.colorScale(t[this.target]))).attr("fill","none").attr("stroke-width",1).attr("stroke-opacity",1),this.svg.append("circle").attr("cx",n).attr("cy",e).attr("r",this.radius).attr("stroke","black").attr("fill","none")}}const oa=t=>{switch(console.log(t.type),t.type){case"radial":return new bo(t);case"inline":return new Ao(t);case"circular":return new Yo(t);case"seq-generic":return new Ho(t);case"polygon":let n=360/t.dimensions.length,e=t.dimensions.map(((t,e)=>e*n)),r=new Ho(t);return r.setOrientations(e),r;case"bush":return new Ko(t);case"nseq-generic":return new Wo(t);case"parallel":let i=new Wo(t);return i.setOrientations(t.dimensions.map((t=>90))),i.setPCP(!0),i;case"cpc":return new Jo(t);case"spc":return new ta(t);case"apc":return new na(t);case"prc":return new ea(t);case"epc":return new ra(t);case"pwc":return new ia(t);default:console.log("Chart not supported")}}})(),__webpack_exports__})()}));